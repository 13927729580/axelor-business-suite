<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_3.0.xsd">
	
	<form name="sale-order-form" title="Sale order" model="com.axelor.apps.sale.db.SaleOrder" id="business-project-sale-order-form"
	onNew="action-group-supplychain-saleorder-onnew"
	onLoad="action-group-supplychain-saleorder-onload" 
	onSave="save,action-method-set-sale-order-draft-sequence,action-sale-order-check-create-project,save">
		
		<panel-include view="sale-order-form" from="axelor-sale"/>
	</form>
	
	<action-record name="action-sale-order-check-create-project" model="com.axelor.apps.sale.db.SaleOrder">
	    <field name="project" expr="action:action-business-project-create-sale-order-project" if="project == null"/>
	</action-record>
	
	<action-record name="action-business-project-create-sale-order-project" model="com.axelor.apps.project.db.Project">
	    <field name="partner" expr="eval:clientPartner"/>
	    <field name="code" expr="eval:saleOrderSeq"/>
	    <field name="name" expr="eval:clientPartner?.name"/>
	    <field name="businessProject" expr="eval:true"/>
	</action-record>
	
</object-views>	