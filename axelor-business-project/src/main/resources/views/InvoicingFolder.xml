<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_3.0.xsd">

	<grid name="invoicing-folder-grid" title="Invoicing Folders" model="com.axelor.apps.businessproject.db.InvoicingFolder">
		<field name="folder"/>
	</grid>

	<form name="invoicing-folder-form" title="Invoicing Folder" model="com.axelor.apps.businessproject.db.InvoicingFolder">
		<panel>
			<field name="folder"/>
			<button name="generateInvoice" title="Generate Invoice" onClick="save,action-invoicing-folder-method-generate-invoice"/>
			<field name="invoice" readonly="true"/>
		</panel>
		<panel-related field="saleOrderLineSet" canEdit="false" canNew="false"/>
		<panel-related field="purchaseOrderLineSet" canEdit="false" canNew="false"/>
		<panel-related field="logTimesSet" onSelect="action-invoicing-folder-attrs-domain-log-time-set" canEdit="false" canNew="false"/>
		<panel-related field="expenseLineSet" canEdit="false" canNew="false"/>
		<panel-related field="analyticMoveLineSet" canEdit="false" canNew="false"/>
		<panel-related field="projectTaskSet" canEdit="false" canNew="false"/>
	</form>
	
	<action-attrs name="action-invoicing-folder-attrs-domain-log-time-set">
		<attribute name="domain" for="logTimesSet" expr="eval: &quot; self.affectedToTimeSheet != null AND self.affectedToTimeSheet.statusSelect = 3 AND (self.project != null OR self.task != null) AND self.invoiced = false &quot;"/>
	</action-attrs>
	
	<action-method name="action-invoicing-folder-method-generate-invoice">
		<call class="com.axelor.apps.business.project.web.InvoicingFolderController" method="generateInvoice"/>
	</action-method>
	    
</object-views>