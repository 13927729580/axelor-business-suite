<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_3.0.xsd">

	<grid name="invoicing-folder-grid" title="Invoicing Folders" model="com.axelor.apps.businessproject.db.InvoicingFolder">
		<field name="projectTask"/>
	</grid>

	<form name="invoicing-folder-form" title="Invoicing Folder" model="com.axelor.apps.businessproject.db.InvoicingFolder" 
		onNew="action-invoicing-folder-attrs-title-project-task" onLoad="action-invoicing-folder-attrs-title-project-task">
		<panel>
			<field name="projectTask" onChange="action-invoicing-folder-method-fill-in" colSpan="12" readonlyIf="invoice != null"/>
			<button name="automaticFillIn" title="Automatically Fill in" onClick="action-invoicing-folder-method-fill-in" readonlyIf="invoice != null"/>
			<button name="generateInvoice" title="Generate Invoice" onClick="save,action-invoicing-folder-method-generate-invoice" readonlyIf="invoice != null"/>
			<field name="invoice" readonly="true"/>
			<button name="seeInvoice" title="See Invoice Generated" onClick="action-invoicing-folder-view-see-invoice" showIf="invoice != null"/>
		</panel>
		<panel-related field="saleOrderLineSet" canNew="false" canEdit="false" canSelect="false" form-view="sale-order-line-form"/>
		<panel-related field="purchaseOrderLineSet"  canNew="false" canEdit="false" canSelect="false"/>
		<panel-related field="logTimesSet" canNew="false" canEdit="false" canSelect="false"/>
		<panel-related field="expenseLineSet" canNew="false" canEdit="false" canSelect="false"/>
		<panel-related field="projectTaskSet" canNew="false" canEdit="false" canSelect="false" form-view="project-task-form"/>
		<panel-related field="elementsToInvoiceSet" canNew="false" canEdit="false" canSelect="false" />
		<panel-related field="manufOrderSet" canNew="false" canEdit="false" canSelect="false" if-module="axelor-business-production"/>
		
	</form>
	
	<action-method name="action-invoicing-folder-method-generate-invoice">
		<call class="com.axelor.apps.business.project.web.InvoicingFolderController" method="generateInvoice"/>
	</action-method>
	
	<action-method name="action-invoicing-folder-method-fill-in">
		<call class="com.axelor.apps.business.project.web.InvoicingFolderController" method="fillIn"/>
	</action-method>
	
	<action-attrs name="action-invoicing-folder-attrs-title-project-task">
		<attribute name="title" for="projectTask" expr="eval: com.axelor.apps.base.service.administration.GeneralService.getGeneral().getProjectTaskLabel()" if="com.axelor.apps.base.service.administration.GeneralService.getGeneral().getProjectTaskLabel() != null"/>
		<attribute name="title" for="projectTaskSet" expr="eval: com.axelor.apps.base.service.administration.GeneralService.getGeneral().getProjectTaskLabel()" if="com.axelor.apps.base.service.administration.GeneralService.getGeneral().getProjectTaskLabel() != null"/>
	</action-attrs>
	
	<action-view name="action-invoicing-folder-view-see-invoice" title="Invoice" model="com.axelor.apps.account.db.Invoice">
		<view type="form"/>
		<view type="grid"/>
		<context name="_showRecord" expr="eval: invoice?.id"/>
	</action-view>
	    
</object-views>