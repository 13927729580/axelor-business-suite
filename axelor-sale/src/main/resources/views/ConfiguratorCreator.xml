<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_5.0.xsd">
    
    <grid name="configurator-creator-grid" title="ConfiguratorCreators" model="com.axelor.apps.sale.db.ConfiguratorCreator">
    	<field name="name"/>
		<field name="isActive"/>
    </grid>
    
    <form name="configurator-creator-form" title="ConfiguratorCreator" model="com.axelor.apps.sale.db.ConfiguratorCreator">
    	<panel>
    		<field name="name"/>
    		<panel-related field="attributes" colSpan="12" readonlyIf="id == null" form-view="sale-json-field-form" grid-view="sale-json-field-grid"/>
    	</panel>
		<panel sidebar="true" title="Actions">
			<button name="activate" title="Activate" readonlyIf="isActive"
					onClick="action-configurator-creator-record-activate,save"/>
			<field name="generateProduct" widget="boolean-switch"/>
		</panel>
        <panel>
			<field name="configuratorBOM" if-module="axelor-production" colSpan="12">
				<editor>
						<field name="name" colSpan="6"/>
						<field name="useCondition" widget="CodeEditor" height="120" colSpan="12"
							   x-code-syntax="groovy"/>
						<panel title="Product">
							<field name="$defProductAsFormula" title="Define with a script" colSpan="6" type="boolean"/>
							<field name="product" colSpan="12" showIf="!$defProductAsFormula"/>
							<field name="productFormula" colSpan="12" height="120" widget="CodeEditor"
								   x-code-syntax="groovy" showTitle="false" showIf="$defProductAsFormula"/>
						</panel>
						<panel title="Qty">
							<field name="$defQtyAsFormula" title="Define with a script" colSpan="6" type="boolean"/>
							<field name="qty" colSpan="12" showIf="!$defQtyAsFormula"/>
							<field name="qtyFormula" colSpan="12" height="120" widget="CodeEditor"
								   showTitle="false" x-code-syntax="groovy" showIf="$defQtyAsFormula"/>
						</panel>
						<panel title="Unit">
							<field name="$defUnitAsFormula" title="Define with a script" colSpan="6" type="boolean"/>
							<field name="unit" colSpan="12" showIf="!$defUnitAsFormula"/>
							<field name="unitFormula" colSpan="12" height="120" widget="CodeEditor"
								   showTitle="false" x-code-syntax="groovy" showIf="$defUnitAsFormula"/>
						</panel>
						<panel title="Production process">
							<field name="$defProdProcessAsFormula" title="Define with a script" readonlyIf="$defProdProcessAsConfigurator" colSpan="6" type="boolean"/>
							<field name="$defProdProcessAsConfigurator" title="Define with a configurator" readonlyIf="$defProdProcessAsFormula" colSpan="6" type="boolean"/>
							<field name="prodProcess" colSpan="12" showIf="!$defProdProcessAsFormula &amp;&amp; !$defProdProcessAsConfigurator"/>
							<field name="prodProcessFormula" colSpan="12" height="120" widget="CodeEditor"
								   showTitle="false" x-code-syntax="groovy" showIf="$defProdProcessAsFormula &amp;&amp; !$defProdProcessAsConfigurator"/>
							<field name="configuratorProdProcess" colSpan="12" showIf="$defProdProcessAsConfigurator"/>
						</panel>
					<field name="configuratorBomList" colSpan="12"/>
				</editor>
			</field>
		</panel>
		<panel-related field="configuratorFormulaList" form-view="configurator-formula-form"
					   grid-view="configurator-formula-grid"/>
        <panel>
			<button name="createConfigurator" readonlyIf="!isActive" colSpan="3"
					title="Create configurator" onClick="action-configurator-creator-group-create-configurator"/>
		</panel>
    </form>
	
	<action-group name="action-configurator-creator-group-create-configurator">
        <action name="save"/>
		<action name="action-configurator-creator-create-configurator"/>
	</action-group>
    
    <action-method name="action-configurator-creator-create-configurator">
    	<call class="com.axelor.apps.sale.web.ConfiguratorCreatorController"
			  method="createConfigurator"/>
    </action-method>

	<action-record name="action-configurator-creator-record-activate"
				   model="com.axelor.apps.sale.db.ConfiguratorCreator">
		<field name="isActive" expr="eval: true"/>
	</action-record>

</object-views>