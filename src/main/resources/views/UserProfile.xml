<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">

	<grid name="userProfile-grid" editable="false" title="User Profile" 
		model="com.axelor.apps.base.db.UserProfile" >
		<toolbar>
			<button name="delete" title="Delete" hidden="true" />
		</toolbar>
		<field name="driveUser" title="User" />
		<field name="emailId" title="Email Id"></field>
		<field name="name" title="Name"></field>
	</grid>

	<form name="userProfile-form" title="User Profile" cols="2" 
		onLoad="action-disable-for-others,com.axelor.googleapps.userprofile.UserProfileController:checkUserProfileExistance"
		colWidths="*,400" model="com.axelor.apps.base.db.UserProfile" 
		onNew="action-disable-for-others,action-current-user-for-userProfile,com.axelor.googleapps.userprofile.UserProfileController:checkUserProfileExistance">
			<break />
			<group title="User Profile" cols="2">
				<field name="driveUser" title="User" readonly="true" /> <break />
				<field name="emailId" title="Email Id" required="true" ></field>
				<field name="name" title="Name" required="true" ></field>
			</group>
			<group title="Instructions">
				<label title="Enter the email Address of Google Account in which you are "/><break/>
				<label title="going to authorize for using Gooogle Drive Service through Google Apps"/><break/>
			</group>
	</form>

	<action-record name="action-current-user-for-userProfile"
		model="com.axelor.apps.base.db.UserProfile">
		<field name="driveUser" expr="eval:__user__" />
	</action-record>
	
	<action-attrs name="action-disable-for-others">
		<attribute name="readonly" for="emailId" expr="true" if="driveUser != __user__" />
		<attribute name="readonly" for="name" expr="true" if="driveUser != __user__" />
		<attribute name="readonly" for="emailId" expr="false" if="driveUser == __user__ || id==null" />
		<attribute name="readonly" for="name" expr="false" if="driveUser == __user__ || id==null" />
	</action-attrs>

</object-views>
