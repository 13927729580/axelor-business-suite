<?xml version="1.0" encoding="UTF-8"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">
	
		<!-- SALES MAN DASHBOARD -->
		
	<portal title="Dashboard" name="sale.saleman.dashboard.portal.sample"  >
		<portlet action="portal.salesman.dashboard.orders" x-height="350" canSearch="true" />
		<portlet action="portal.my.turnover.per.month" x-height="350" />
		<portlet action="portal.salesman.dashboard.leads" canSearch="true" x-height="350" />
		<portlet action="portal.salesman.dashboard.activities" canSearch="true" x-height="350" />
		<portlet action="portal.salesman.dashboard.opportunities" canSearch="true" x-height="350" />
	</portal>
	
	<action-view name="portal.salesman.dashboard.orders" title="My Sales Orders" model="com.axelor.apps.sale.db.SaleOrder">
	  <view type="grid" name="sale-order-grid"/>
	  <view type="form" name="sale-order-form"/>
	  <domain>self.salemanUser = :__user__ and self.statusSelect in (1, 2) and self.company = :active_company</domain>
	  <context name="active_company" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
	
	<action-view title="My Turnover per month" name="portal.my.turnover.per.month">
	  <view type="chart" name="chart.my.turnover.per.month"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id" />
	</action-view>
	
	<action-view name="portal.salesman.dashboard.leads" title="My Current Leads" model="com.axelor.apps.crm.db.Lead">
	  <view type="grid" name="my-lead-grid"/>
	  <view type="form" name="lead-form"/>
	  <domain>self.user= :__user__ and self.updatedOn >= :fromDate and self.updatedOn &lt;= :todayDate</domain>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
	  <context name="fromDate" expr="eval:todayDate.minusMonths(1)"/>  
	</action-view>
	
	<action-view name="portal.salesman.dashboard.activities" title="My Today Activities"
		model="com.axelor.apps.crm.db.Event">
		<view type="grid" name="my-event-grid"/>
		<view type="form" />
	    <domain>self.startDateTime between :_today and :_tomorrow and self.user =:__user__</domain>
	    <context name="_tomorrow" expr="eval: __date__.plusDays(1).toDateTimeAtStartOfDay()"/>
	    <context name="_today" expr="eval: __date__.toDateTimeAtStartOfDay()"/>
	</action-view>
	
	<action-view name="portal.salesman.dashboard.opportunities" title="My Opportunities" model="com.axelor.apps.crm.db.Opportunity">
	  <view type="grid" name="my-opportunity-grid"/>
	  <view type="form" name="opportunity-form"/>
	  <domain>self.user = :__user__</domain>
	</action-view>
	
	
	
	<!-- 	SALES MANAGER DASHBOARD -->
	
	<portal title="Dashboard" name="sale.manager.dashboard.portal.sample"  >
		<portlet action="portal.sales.turnover.ytd.vs.previous.years.by.month" x-height="350"/>
		<portlet action="portal.sales.turnover.ytd.vs.past.year" x-height="350"/>  	
		<portlet action="portal.sales.turnover.by.product.ytd.vs.lastyear" x-height="350"/>
		<portlet action="portal.sales.turnover.ytd.vs.lastyear.by.family" x-height="350" />
		<portlet action="portal.sales.turnover.by.family.ytd.vs.lastyear" x-height="350" />		
		<portlet action="portal.sales.manager.dashboard.turnover.per.team" x-height="350" />
		<portlet action="portal.sales.manager.dashboard.turnover.per.salesman" x-height="350" />
		<portlet action="portal.sales.manager.dashboard.sales.distribution.per.family" x-height="350" />
		<portlet action="portal.sales.manager.dashboard.product.sales.per.category" x-height="350" />
		<portlet action="portal.sales.manager.dashboard.sales.per.country" x-height="350" />
		<portlet action="portal.turnover.sales.by.month.by.category" x-height="350" />    
   	    <portlet action="portal.units.sold.on.cust.sales.by.category" x-height="350" />
   	    <portlet action="portal.stockMove.nbr.delivery.by.country" x-height="350" if-module="axelor-stock"/>  
   	    <portlet action="portal.stockMoveLine.product.delivery.by.country" x-height="350" if-module="axelor-stock"/>  
   	    <portlet action="portal.stockMoveLine.product.delivery.by.country.by.family" x-height="350" if-module="axelor-stock"/> 
   	    <portlet action="portal.stockMove.deliveries.time.delay.in.nbr" x-height="350" if-module="axelor-stock"/>
   	    <portlet action="portal.stockMove.average.delivery.time.delay" x-height="350" if-module="axelor-stock"/> 
	</portal>
	
	<action-view title="Sales turnover comparison per month this year vs past years" model="com.axelor.apps.sale.db.SaleOrder" name="portal.sales.turnover.ytd.vs.previous.years.by.month">
	  <view type="chart" name="chart.sale.turnover.ytd.vs.previous.years.by.month"/>
	  <context name="_user_id" expr="eval:__user__.id"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
	</action-view>

	<action-view name="portal.sales.turnover.ytd.vs.lastyear" title="Sales Turnover This year vs Last year" model="com.axelor.apps.sale.db.SaleOrder">
	    <view type="chart" name="chart.sale.turnover.ytd.vs.lastyear"/>
	    <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view title="Sales turnover this year vs past years" model="com.axelor.apps.sale.db.SaleOrder" name="portal.sales.turnover.ytd.vs.past.year">
	  <view type="chart" name="chart.sale.turnover.ytd.vs.past.year"/>
	  <context name="_user_id" expr="eval:__user__.id"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
	</action-view>
	
	<action-view name="portal.sales.turnover.by.product.ytd.vs.lastyear" title="Sales TurnOver by Product this year vs last year" model="com.axelor.apps.sale.db.SaleOrder">
	    <view type="chart" name="chart.sale.turnover.by.product.ytd.vs.lastyear"/>
	    <domain>self.company=:active_company</domain>
	    <context name="active_company" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()" />
	</action-view>
	
	<action-view name="portal.sales.turnover.ytd.vs.lastyear.by.family" title="Sales Turnover YTD vs Last year by Product Family" model="com.axelor.apps.sale.db.SaleOrderLine">
	  <view type="chart" name="chart.sale.turnover.ytd.vs.lastyear.by.family"/>
	  <domain>self.saleOrder.company=:active_company</domain>
	  <context name="active_company" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()" />
	</action-view>
	
	<action-view name="portal.sales.turnover.by.family.ytd.vs.lastyear" title="Product Family Sales Turnover this year vs last year" model="com.axelor.apps.sale.db.SaleOrderLine">
	  <view type="chart" name="chart.sale.turnover.by.family.ytd.vs.lastyear"/>
	  <domain>self.saleOrder.company=:active_company</domain>
	  <context name="active_company" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()" />
	</action-view>

	<action-view name="portal.sales.manager.dashboard.turnover.per.team" title="Turnover (excl. Tax) per team">
	  <view type="chart" name="chart.sale.manager.dashboard.turnover.per.team"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.sales.manager.dashboard.turnover.per.salesman" title="Turnover (excl. Tax) per saleman">
	  <view type="chart" name="chart.sale.manager.dashboard.turnover.per.saleman"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.sales.manager.dashboard.sales.distribution.per.family" title="Sales distribution per product family">
	  <view type="chart" name="chart.sale.manager.dashboard.sale.distribution.per.family"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.sales.manager.dashboard.product.sales.per.category" title="Sales distribution per product category">
	  <view type="chart" name="chart.sale.manager.dashboard.product.sale.per.category"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.sales.manager.dashboard.sales.per.country" title="Sales per country">
	  <view type="chart" name="chart.sale.manager.dashboard.sale.per.country"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.turnover.sales.by.month.by.category" title="Sales Turnover (Orders) by month by category">
	  <view type="chart" name="chart.turnover.sale.by.month.by.category"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
	
	<action-view name="portal.units.sold.on.cust.sales.by.category" title="Nbr of Units sold (Orders) by category">
	  <view type="chart" name="chart.units.sold.on.cust.sale.by.category"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" />
	  <context name="_user_id" expr="eval:__user__.id"/>
	</action-view>
 		
	
	
	<!-- This portal is used in product-form (base) -->
	<action-view name="portal.product.sales.turnover.per.month" title="Product sale turnover (Excl. Tax) per month" model="com.axelor.apps.base.db.Product">
	  <view type="chart" name="chart.product.sale.turnover.per.month"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
	  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
	
	<action-view name="portal.product.sale.turnover.last.12.month" title="Product sale turnover (Excl. Tax) last 12 month" model="com.axelor.apps.base.db.Product">
	  <view type="chart" name="chart.product.sale.turnover.last.12.month"/>
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
	  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
	
	
	<!-- Sales DashBoard -->
	
	<portal name="sale.dashboard.1.portal.view" title="Sales Dashboard 1">
		<portlet action="portal.salesman.dashboard.orders" canSearch="true" x-height="350" />
		<portlet action="portal.my.turnover.per.month"  x-height="350" />
		<portlet action="portal.sales.manager.dashboard.turnover.per.team"  x-height="350" />
		<portlet action="portal.sales.manager.dashboard.turnover.per.salesman"  x-height="350" />
		<portlet action="portal.sales.manager.dashboard.sales.distribution.per.family"  x-height="350" />
		<portlet action="portal.sales.manager.dashboard.product.sales.per.category"  x-height="350" />
		<portlet action="portal.sales.manager.dashboard.sales.per.country"  x-height="350" />
		<portlet action="portal.turnover.sales.by.month.by.category"  x-height="350" />
		<portlet action="portal.units.sold.on.cust.sales.by.category"  x-height="350" />
	</portal>
	
	<portal name="sale.dashboard.2.portal.view" title="Sales Dashboard 2">
		<portlet action="portal.sales.turnover.by.product.ytd.vs.lastyear" canSearch="true" x-height="350" />
		<portlet action="portal.sales.turnover.ytd.vs.previous.years.by.month" x-height="350"/>
		<portlet action="portal.sales.turnover.ytd.vs.lastyear" canSearch="true" x-height="350" />
		<portlet action="portal.sales.turnover.ytd.vs.past.year" x-height="350" />
		<portlet action="portal.sales.turnover.ytd.vs.lastyear.by.family" canSearch="true" x-height="350" />
		<portlet action="portal.sales.turnover.by.family.ytd.vs.lastyear" canSearch="true" x-height="350" />
		<portlet action="portal.turnover.per.month.per.salesman.over.6mth" canSearch="true" x-height="350"/>
	    <portlet action="portal.turnover.per.month.per.salesman.over.6mth" canSearch="true" x-height="350"/>
	    <portlet action="portal.sales.turnover.per.customer.type" canSearch="true" x-height="350"/>
	    <portlet action="portal.sales.turnover.per.customer.category" canSearch="true" x-height="350"/>
	    <portlet action="portal.sales.turnover.per.customer.sector" canSearch="true" x-height="350"/>
	</portal>
	
    <action-view title="Turnover per month per saleman (6 month)" model="com.axelor.apps.sale.db.SaleOrder" name="portal.turnover.per.month.per.salesman.over.6mth">
		  <view type="chart" name="chart.turnover.per.month.per.saleman.over.6mth"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
	
	<action-view title="Turnover per month per saleman (4 month)" model="com.axelor.apps.sale.db.SaleOrder" name="portal.turnover.per.month.per.salesman.over.6mth">
		  <view type="chart" name="chart.turnover.per.month.per.saleman.over.4mth"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
	
	<action-view title="Turnover per customer type" model="com.axelor.apps.sale.db.SaleOrder" name="portal.sales.turnover.per.customer.type">
		  <view type="chart" name="chart.sale.turnover.per.customer.type"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>

	<action-view title="Turnover per customer category" model="com.axelor.apps.sale.db.SaleOrder" name="portal.sales.turnover.per.customer.category">
		  <view type="chart" name="chart.sale.turnover.per.customer.category"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>

	<action-view title="Turnover per customer sector" model="com.axelor.apps.sale.db.SaleOrder" name="portal.sales.turnover.per.customer.sector">
		  <view type="chart" name="chart.sale.turnover.per.customer.sector"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
		
	<!-- This portlet is called from Product-Category-Form Axelor Base -->
    <action-view title="Category sale turnover (Excl. Tax) per month" model="com.axelor.apps.base.db.Product" name="portal.category.sales.turnover.per.month">
		  <view type="chart" name="chart.category.sale.turnover.per.month"/>
		  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>
	</action-view>
		
 	<!-- This Portlet is called in Partner-Form in axelor-base and axelor-account -->
	<action-view name="portal.customer.sales.lastYear.vs.ytd.by.family" title="Sales turnover comparison per month this year vs past years by family" model="com.axelor.apps.sale.db.SaleOrderLine">
	  <view type="chart" name="chart.customer.sale.lastYear.vs.ytd.by.family"/>
	  <context name="activeCompany" expr="call:com.axelor.apps.base.service.user.UserService:getUserActiveCompany()"/>  
	  <context name="todayDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>  
	</action-view>
		
		
</object-views>