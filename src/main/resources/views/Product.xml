<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">
 
 
    <form cols="2" name="product-form" id="supplychain-product-form" onNew="action-product-record-default-new,action-product-record-sale-supply-select" title="Product" model="com.axelor.apps.base.db.Product" >
    <toolbar>
    		<button name="sendByEmail" title="Send Email" icon="fa-envelope" onClick="action-send-by-email-with-template"/>
			<button name="showProductSheet" title="Product sheet" icon="fa-print" onClick="save,action-product-method-show-product-sheet"/>
    	</toolbar>
	    <group colWidths="15%,85%" colSpan="6" cols="2">
	            <group colSpan="1">
	                <field name="picture" showTitle="false" widget="Image"/>
	            </group>
	            <group colSpan="1" cols="6">
					<field name="name" showTitle="false" colSpan="3" css="highlight" placeholder="Name"/>
					<spacer/>
					<field name="code" showTitle="false" css="highlight" placeholder="Code"/>
					<field name="versionSelect"/>
					<break/>
					<group title="Product typology" colSpan="3" cols="2" colWidths="30%,70%">
						<field name="productTypeSelect" onChange="action-product-record-sale-supply-select,action-product-validate-sale-supply-select"/>
						<field name="saleSupplySelect" onChange="action-product-validate-sale-supply-select"/>
						<field name="invoiceLineType"/>
					</group>
					<group title="Categorization" colSpan="3" cols="2" colWidths="30%,70%">
						<field name="applicationTypeSelect" onChange="action-set-product-type-select"/>
						<field name="productFamily"/>
						<field name="productCategory" domain="self.productFamily = :productFamily"/>
					</group>
				</group>
	    </group>
	    <separator title="Product specific attributes" colSpan="2"/>
	    <notebook colSpan="2">
			<page title="Sale" colSpan="2" cols="4">	
				<group colSpan="4" colWidths="20%,30%,20%,30%">
					<separator title="Sales" colSpan="2"/>
					<separator title="Product dates" colSpan="2"/>
					<field name="salePrice"/>
					<field name="startDate"/>
					<field name="saleCurrency"/>
					<field name="endDate" onChange="action-product-validate-end-date,action-product-method-reset-end-date"/>
					<field name="unit"/>
				</group>
				<group colSpan="4">
					<group colSpan="2">
						<separator title="Description" colSpan="2"/>
						<break/>
						<field name="description" showTitle="false" colSpan="2" widget="html"/>
					</group>
					<group colSpan="2">
						<separator title="Internal description" colSpan="2"/>
						<break/>
						<field name="internalDescription" showTitle="false" colSpan="2" widget="html"/>
					</group>
				</group>
			</page>
			<page title="Purchase/Costs" colSpan="2" cols="4">
				<separator title="Purchases" colSpan="2"/>
				<separator title="Costs" colSpan="2"/>
				<field name="purchasePrice"/>
				<field name="costPrice" onChange="action-product-record-compute-sale-price"/>
				<field name="purchaseCurrency"/>
				<field name="managPriceCoef" onChange="action-product-record-compute-sale-price"/>
				<break/>
				<field name="defaultSupplierPartner" domain="self.isContact = false AND self.supplierTypeSelect in (2,3)"/>
				<separator title="Suppliers catalog" colSpan="4"/>
				<field name="supplierCatalogList" colSpan="4"/>        
			</page>
	        <page title="Accounting" colSpan="2" cols="4">
	            <field name="accountManagementList" colSpan="4" domain="self.typeSelect = 1" form-view="account-management-product-form" grid-view="account-management-product-grid"/>
	        </page>
	<!--             <page title="Related BOMs"> -->
	<!--             	<button name="showBillsOfMaterial" title="Show bills of material"/> -->
	<!--             	 <portlet action="chart:chart.planned.qty.by.location" height="200" colSpan="2"/> -->
	<!--             </page> -->
	        <page title="Stock" showIf="productTypeSelect == 'storable'" colSpan="2" cols="4">
            <separator title="Procurement settings" colSpan="4"/>
				<field name="procurementMethodSelect" requiredIf="productTypeSelect == 'storable'"/>
				<field name="isRawMaterial" showIf="productTypeSelect != 'service'"/>
				<button name="showAllStockMoveLine" title="Show all stock move" colSpan="2" onClick="action-product-view-stock-move-line"/>
				<spacer/>
				<break/>
				<group colSpan="4">
					<portlet action="action-product-view-stock" colSpan="4"/>
					<portlet action="chart:chart.stock.report.for.product" height="200" colSpan="4"/>
					<portlet action="chart:chart.stock.history.report.for.product" height="200" colSpan="4"/>
				</group>
<!-- 				<group showIf="true" colSpan="4"> -->
<!-- 					<portlet action="action-product-view-stock" colSpan="4"/> -->
<!-- 					<portlet action="chart:chart.stock.report.for.product" height="200" colSpan="4"/> -->
<!-- 					<portlet action="chart:chart.stock.history.report.for.product" height="200" colSpan="4"/> -->
<!-- 				</group> -->
<!-- 				<group showIf="false" colSpan="4"> -->
<!-- 					<portlet action="action-product-view-stock-product-variant" colSpan="4"/> -->
<!-- 					<portlet action="chart:chart.stock.report.for.product.variant" height="200" colSpan="4"/> -->
<!-- 					<portlet action="chart:chart.stock.history.report.for.product.variant" height="200" colSpan="4"/> -->
<!-- 				</group> -->
			</page>
			<page title="Production informations" showIf="productTypeSelect != 'service'">
				<field name="defaultBillOfMaterial" domain="self.product.id = :id" onSelect="action-product-attrs-bill-of-material-domain"/>
				<field name="lastProductionPrice" readonly="true"/>
				<button name="createProductionOrder" title="Create production order" colSpan="2" onClick="save,action-product-view-create-production-order"/>
				<portlet action="action-product-view-show-bill-of-material" colSpan="4"/>
			</page>
	        <page title="Tracking number" colSpan="2" cols="4" showIf="productTypeSelect != 'service'"  colWidths="20%,30%,20%,30%">
	        	<group colSpan="4" cols="4" colWidths="20%,30%,20%,30%">
	        		<group colSpan="4" cols="4">
	        			<field name="hasWarranty" colSpan="2"/>
		            	<field name="warrantyNbrOfMonths" colSpan="2" showIf="hasWarranty"/>
	        	 		<field name="isPerishable" colSpan="2"/>
		            	<field name="perishableNbrOfMonths" colSpan="2" showIf="isPerishable"/>
	        	 	</group>
	        	 	<group colSpan="2" cols="2">
			            <field name="trackingNumberConfiguration" colSpan="2"/>
		            </group>
	        	</group>
	        </page>
	        <page title="Variants">
	        	<group name="parentVariant" showIf="!parentProduct" colSpan="4">
	        		<field name="productVariantConfig" showTitle="false" widget="NestedEditor" canSelect="false" edit-window="self" form-view="product-variant-config-form" summary-view="true" colSpan="4"/>
	            	<button name="generateProductVariant" title="Generate product variants" colSpan="2" onClick="save,action-product-method-generate-product-variant"/>
	        		<portlet action="action-product-view-product-variant" colSpan="4"/>
	        	</group>
	            <group name="childVariant" showIf="parentProduct" colSpan="4">
	            	<field name="productVariant" showTitle="false" widget="NestedEditor" canSelect="false" edit-window="self" form-view="product-variant-form" summary-view="true"/>
	        		<field name="parentProduct"/>
	        		<portlet action="action-product-view-other-product-variant" colSpan="4"/>
	            </group>
            	<button name="updateProductsPrices" title="Update products prices" colSpan="2" onClick="save,action-product-method-update-products-prices" help="Update current product prices and variants"/>
	        </page>
<!-- 	        <page title="Turnover"> -->
<!--   				<portlet action="portal.product.sales.turnover.per.month" height="350" colSpan="4" />       -->
<!-- 			</page>	         -->
 			<page title="Links">
 				<portlet action="action-product-view-stock-move-line-incoming-planned" colSpan="4"/>
 				<portlet action="action-product-view-stock-move-line-consumption-planned" colSpan="4"/>
 				<portlet action="action-product-view-stock-move-line" colSpan="4"/>
 				<portlet action="action-product-view-supplier-requests-historical" colSpan="4"/>
 				<portlet action="action-product-view-purchase-order-line-in-progress" colSpan="4"/>
 				<portlet action="action-product-view-purchase-order-line-historical" colSpan="4"/>
 				<portlet action="action-product-view-stock-move-line-consumption-historical" colSpan="4"/>
	        </page>
	    </notebook>
	</form>
    
    <action-view name="action-product-view-stock" title="Stock" model="com.axelor.apps.supplychain.db.LocationLine">
    	<view type="grid" name="location-line-product-grid"/>
    	<view type="form" name="location-line-product-form"/>
    	<domain>self.product.id = :id and self.location.typeSelect = 1</domain>
    </action-view>
    
    <action-view name="action-product-view-stock-move-line-incoming-planned" title="Stock Moves planned"
		model="com.axelor.apps.supplychain.db.StockMoveLine">
		<view type="grid" name="stock-move-line-all-grid"/>
		<view type="form" name="stock-move-line-all-form"/>
		<domain>self.product.id = :_id AND self.stockMove.statusSelect = 2 and self.stockMove.typeSelect = 3</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>	
	
	<action-view name="action-product-view-stock-move-line-consumption-planned" title="Stock Moves consumption planned"
		model="com.axelor.apps.supplychain.db.StockMoveLine">
		<view type="grid" name="stock-move-line-all-grid"/>
		<view type="form" name="stock-move-line-all-form"/>
		<domain>self.product.id = :_id and self.stockMove.statusSelect = 2 and self.stockMove.toLocation.typeSelect = 3</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>
	
		<action-view name="action-product-view-stock-move-line-consumption-historical" title="Stock Moves consumption historical"
		model="com.axelor.apps.supplychain.db.StockMoveLine">
		<view type="grid" name="stock-move-line-all-grid"/>
		<view type="form" name="stock-move-line-all-form"/>
		<domain>self.product.id = :_id and self.stockMove.toLocation.typeSelect = 3</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>	
	
 	<action-view name="action-product-view-stock-move-line" title="Stock Moves historical"
		model="com.axelor.apps.supplychain.db.StockMoveLine">
		<view type="grid" name="stock-move-line-all-grid"/>
		<view type="form" name="stock-move-line-all-form"/>
		<domain>self.product.id = :_id</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>	

	<action-view name="action-product-view-supplier-requests-historical" title="Supplier requests historical"
		model="com.axelor.apps.suppliermanagement.db.PurchaseOrderSupplierLine">
		<view type="grid" name="purchase-order-supplier-line-supplier-grid" />
		<view type="form" name="purchase-order-supplier-line-supplier-form" />
		<domain>self.purchaseOrderLine.product.id = :_id</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>
	
	<action-view name="action-product-view-purchase-order-line-in-progress" title="Purchase order in progress"
		model="com.axelor.apps.supplychain.db.PurchaseOrderLine">
		<view type="grid" name="purchase-order-line-grid"/>
		<view type="form" name="purchase-order-line-form"/>
		<domain>self.product.id = :_id and self.purchaseOrder.statusSelect in (1,2,3)</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>	
	
	
	<action-view name="action-product-view-purchase-order-line-historical" title="Purchase order historical"
		model="com.axelor.apps.supplychain.db.PurchaseOrderLine">
		<view type="grid" name="purchase-order-line-grid"/>
		<view type="form" name="purchase-order-line-form"/>
		<domain>self.product.id = :_id</domain>
		<context name="_id" expr="eval: id"/>
	</action-view>	
	
	
 	
</object-views>
