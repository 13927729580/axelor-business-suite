<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
    
    <grid name="campaign-grid" title="Campaigns" model="com.axelor.apps.crm.db.Campaign">
        <field name="name"/>
        <field name="statusSelect"/>
        <field name="startDate"/>
        <field name="endDate"/>
        <field name="typeSelect"/>
        <field name="budget"/>
    </grid>
    
    <form name="campaign-form" title="Campaign" model="com.axelor.apps.crm.db.Campaign" cols="4"
    	onNew="action-campaign-record-new,action-campaign-record-currency">
    	<group title="Informations" colSpan="4">
	        <field name="name"/>
	        <field name="statusSelect" widget="NavSelect"/>
	        <field name="startDate"/>
	        <field name="endDate"/>
	        <field name="typeSelect"/>
	        <field name="currency"/>
	        <field name="frequencySelect" hideIf="typeSelect != 8"/>
	        <field name="nbImpressions"/>
	        <group title="Budget" colSpan="4" css="groupTitle">
	        	<field name="budget"/>
		        <field name="expectedCost"/>
		        <field name="actualCost"/>
		        <field name="expectedRevenue"/>
	        </group>
	        <field name="objective" widget="TEXT[height=3]"/>
	        <field name="description" widget="TEXT[height=3]"/>
        </group>
        <group title="Assigned to" canCollapse="true" colSpan="4">
	        <field name="userInfo"/>
	    	<field name="team"/>
	        <field name="company"/>
        </group>
        <group colSpan="3" cols="4" colWidths="25%,25%,25%,25%">
	        <field name="hasForceEmailSending"/>
	        <field name="hasListGenerated"/>
	        <field name="followUpTypeSelect"/>
	        <field name="eventCategory"/>
    	</group>
        <group title="Actions" colSpan="1" cols="1">
        	<button name="showEvents" title="Show events"/>
	        <button name="showMailsAndEmails" title="Show mails/emails"/>
	        <button name="generateRequest" title="Generate request"/>
	        <button name="generateFollowUp" title="Generate follow up"/>
        </group>
        <notebook colSpan="4">
        	<page title="Recipients">
        		<field name="sendingTypeSelect" colSpan="2"/>
        		<break/>
        		<group title="Lists / Queries" colSpan="4" cols="4">
        			<field name="partnerListSet" widget="TagSelect[create=code,name]" colSpan="2"/>
		        	<field name="jpqlQuerySet" widget="TagSelect[create=code,description]" colSpan="2"/>
        		</group>
        		<group title="Contacts / Leads" colSpan="4" cols="4">
	        		<field name="partnerSet" widget="TagSelect[create=name,firstname]" colSpan="2" domain="self.isContact = 'true'"/>
			        <field name="leadSet" widget="TagSelect[create=name]" colSpan="2"/>
		        </group>
        	</page>
        	<page title="Content">
        		 <field name="htmlTemplate" noLabel="true" widget="NestedEditor" summary-view="true" edit-window="popup" form-view="html-template-form" canSelect="true"/>
        	</page>
        </notebook>
    </form>
    
    <action-record name="action-campaign-record-new" model="com.axelor.apps.crm.db.Campaign">
    	<field name="company"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveCompany()"/>
    	<field name="userInfo" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserInfo()"/>
    	<field name="statusSelect" expr="1"/>
    	<field name="typeSelect" expr="3"/>
    	<field name="team" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveTeam()"/>
    </action-record>
    
    <action-record name="action-campaign-record-currency" model="com.axelor.apps.crm.db.Opportunity">
	    <field name="currency" expr="eval: company?.currency"/>
	</action-record>
    
</object-views>