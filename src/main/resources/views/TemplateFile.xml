<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">

	<form name="templateFile-form" title="Document Template" cols="2" colWidths="*,400" 
				model="com.axelor.apps.base.db.TemplateFile" onLoad="action-disable-shareForOther,action-current-user-for-templatefile" 
				onNew="action-current-user-for-templatefile">
		<break/>
		<group title="Document Template" cols="2">
					<field name="dummy3" widget="MasterDetail[type=MANY_TO_ONE|target=com.axelor.auth.db.User|targetName=name]" title="M2O Field" hidden="true"/>
					<field name="googleFile" title="Template Google File" required="true"  domain="self.driveUser=:dummy3 and self.fileType='application/vnd.google-apps.document'" ></field>					
					<field name="share" title="Share" help="Enable This Template Share To Other Users" /><break/>
					<field name="dataModel" required="true" /><break/>
		</group>
	</form>
	
	<grid  name="templateFile-grid" editable="false" title="Document Template Files" model="com.axelor.apps.base.db.TemplateFile">
		<field name="googleFile" title="Template Google File" ></field>
		<field name="share"  title="Share" />		
		<field name="dataModel" title="Data Model" ></field>
	</grid>
	
	<action-attrs name="action-disable-shareForOther">
		<attribute name="readonly" for="share" expr="true" if="googleFile.driveUser != __user__"  />
		<attribute name="readonly" for="share" expr="false" if="googleFile.driveUser == __user__"  />
	</action-attrs>	
	
	<action-method name="action-current-user-for-templatefile">
		<call class="com.axelor.googleapps.document.DocumentController" method="getCurrentUser"/>
	</action-method>
	<action-method name="action-call-save-methods">
		<call class="com.axelor.googleapps.document.DocumentController" method="createDocumentAsTemplate"/>
	</action-method>
</object-views>
