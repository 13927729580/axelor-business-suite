<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
	
	<selection name="alarm.engine.manager.type">
		<option value="0"></option>
		<option value="1">Invoicing Management</option>
		<option value="2">Contract Manager</option>
		<option value="3">Sales Manager</option>
		<option value="4">Technical manager</option>
	</selection>

    <grid name="alarm-engine-grid" title="Alarm engines" model="com.axelor.apps.base.db.AlarmEngine">
        <field name="code"/>
        <field name="metaModel"/>
        <field name="managerTypeSelect"/>
        <field name="activeOk"/>
        <field name="lockingOk"/>
        <field name="externalOk"/>
    </grid>

    <form name="alarm-engine-form" title="Alarm engine" model="com.axelor.apps.base.db.AlarmEngine" cols="4"
    onLoad="action-alarm-engine-attrs-external"
    onNew="action-alarm-engine-attrs-external"
    onSave="action-alarm-engine-method-validate-query">
        <field name="code"/>
        <field name="metaModel"/>
        <field name="alarmMessage"/>
        <field name="managerTypeSelect"/>
        <group colSpan="4" cols="6">
	        <field name="activeOk"/>
	        <field name="lockingOk"/>
	        <field name="externalOk" onChange="action-alarm-engine-attrs-external"/>
        </group>
        <notebook colSpan="4">
        	<page name="queryPage" title="Query" cols="4">
        		<field name="query" colSpan="4" noLabel="true" widget="CodeEditor[syntax=sql]" />
        	</page>
        	<page title="Description" cols="4">
        		<field name="description" colSpan="4" noLabel="true" />
        	</page>
        </notebook>
    </form>
    
    <action-attrs name="action-alarm-engine-attrs-external">
    	<attribute name="hidden" for="queryPage" expr="eval: externalOk"/>
    </action-attrs>
    
    <action-method name="action-alarm-engine-method-validate-query">
    	<call class="com.axelor.apps.base.web.AlarmEngineController" method="validateQuery"/>
    </action-method>
    
</object-views>