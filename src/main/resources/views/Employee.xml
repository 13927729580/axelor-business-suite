<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">

	<grid name="employee-grid" title="Employee"	model="com.axelor.apps.organisation.db.Employee">
		<field name="name" />
		<field name="firstName" />
		<button name="sendByEmail" title="Send by email" colSpan="1" onClick="action-send-by-email-with-template" icon="img/Mail.png"/>
	</grid>

	<form name="employee-form" title="Employee"	model="com.axelor.apps.organisation.db.Employee" cols="4"
	onNew="action-employee-default-record">
		<toolbar>
			<button name="showEmployee" title="Print CV" onClick="save,action-partner-method-show-employee"/>
			<button name="sendByEmail" title="Send email" onClick="save,action-send-by-email-with-template"/>
		</toolbar>
		<group name="header" colSpan="6" cols="6">
			<group colSpan="1">
				<field name="picture" showTitle="false" widget="image"/>
			</group>
			<group colSpan="5" cols="5">
				<group title="Contact" colSpan="1" cols="1">
					<field name="titleSelect" showTitle="false" placeholder="Civility"/>
					<break/>
					<field name="name" showTitle="false" css="highlight" placeholder="Name"/>
					<break/>
					<field name="firstName" showTitle="false" css="highlight" placeholder="First Name"/>
					<separator title="Function" colSpan="1"/>
					<field name="function" placeholder="Function"/>
					<separator title="Department" colSpan="1"/>
					<field name="companyDepartment"/>
				</group>  
				<group title="Main Contact details" colSpan="2" cols="4" colWidths="30%,20%,30%,20%">
						<field name="internalContact"/>
						<field name="internalContact.mobilePhone"/>
						<field name="internalContact.fixedPhone"/>
						<field name="phoneAtCustomer"/>
						<field name="internalContact.emailAddress.address" widget="Email" title="Email"/>
						<break/>
						<field name="internalContact.mainInvoicingAddress" colSpan="4"/>
						<separator title="Emergency" colSpan="4"/>
						<field name="emergencyContact" domain="self.isContact = True"/>
						<field name="emergencyNumber"/>
				</group>
			</group>
		</group>
		<notebook colSpan="6">
			<page title="Additionnal information">
				<group title="Contract Details" colSpan="6" cols="6">
					<field name="contractTypeSelect"/>
					<field name="contractDuration" showIf="contractTypeSelect == 2"/>
					<field name="functionRanking"/>
					<field name="entryDate"/>
					<field name="macroCategorySelect"/>
					<field name="categorySelect"/>
					<field name="exitDate"/>
					<separator title="Advantages" colSpan="6"/>
					<field name="advantages" colSpan="6" showTitle="false"/>
				</group>
				<group title="Hierarchy" colSpan="6" cols="4">
					<group colSpan="2" cols="2" colWidths="20%,80%">
						<field name="supervisedBySelect"/>
						<field name="managerUserInfo" showIf="supervisedBySelect == 1"/>
						<field name="managerProfileProduct" showIf="supervisedBySelect == 2" domain="self.applicationTypeSelect = 2"/>        
					</group>
					<group colSpan="2" cols="2" colWidths="20%,80%">
						<field name="profileProduct" domain="self.applicationTypeSelect = 2" colSpan="2"/>    
					</group>
				</group>
				<break/>
				<field name="personalInfo" showTitle="false" widget="NestedEditor" canSelect="false" form-view="personal-info-edit-form" summary-view="true" colSpan="6"/>
			</page>
			<page title="Profile">
				<group colSpan="4" cols="4">
					<group title="Keywords" colSpan="2">
						<field name="toolKeywordSet" colSpan="2" widget="TagSelect[create=keyWord]" domain="self.typeSelect = '1'" form-view="keyword-tool-form" grid-view="keyword-tool-grid"/>
						<field name="fieldKeywordSet" colSpan="2" widget="TagSelect[create=keyWord]" domain="self.typeSelect = '2'" form-view="keyword-area-form" grid-view="keyword-area-grid"/>
						<field name="jobKeywordSet" colSpan="2" widget="TagSelect[create=keyWord]" domain="self.typeSelect = '3'" form-view="keyword-profession-form" grid-view="keyword-profession-grid"/>
					</group>
					<group title="Competences profile" colSpan="2">
						<field name="competence"/>
					</group>
				</group>
				<field name="positionList" colSpan="4"/>
			</page>
			<page title="Salary" cols="6">
				<group title="Fixed salary" colSpan="6" cols="6">
					<field name="salaryFromDate"/>
					<field name="salaryAmount"/>
					<field name="dailySalaryCost"/>
				</group>
				<field name="bonusList" colSpan="3" grid-view="bonus-grid"/>
				<field name="advanceList" colSpan="3" grid-view="advance-grid"/>
				<field name="paySheetList" colSpan="6" form-view="pay-sheet-employee-form" grid-view="pay-sheet-employee-grid"/>
			</page>
			<page title="Travel expense" cols="6">
				<field name="vehicleFiscalPower"/>
				<field name="commuteFee"/>
				<field name="commuteFeeRefundPerc"/>
				<field name="expenseList" colSpan="6" grid-view="expense-edit-grid"/>
			</page>
			<page title="Leaves">
				<field name="employeeLeaveList" colSpan="4"/>
			</page>
			<page title="History">
				<separator title="Recruitment" colSpan="4"/>
				<break/>
				<field name="candidate"/>    
			</page>
		</notebook>
	</form>
	
	<action-record name="action-employee-default-record" model="com.axelor.apps.organisation.db.Employee">
    	<field name="entryDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" if="entryDate == null"/>
    	<field name="categorySelect" expr="1"/>
    	<field name="macroCategorySelect" expr="4"/>
    </action-record>
	
	<action-method name="action-partner-method-show-employee">
		<call class="com.axelor.apps.organisation.web.EmployeeController" method="showEmployee" />
	</action-method>
	
	
    <search-filters name="employee-filters" model="com.axelor.apps.organisation.db.Employee" title="Employee filters">
		<filter title="Current Employees">
			<domain>self.exitDate IS NULL</domain>
		</filter>
		<filter title="Old Employees">
			<domain>self.exitDate &lt; CURRENT_DATE</domain>
		</filter>
		<filter title="Managers">
			<domain>self.macroCategorySelect = 1 OR self.macroCategorySelect = 2 OR self.macroCategorySelect = 3</domain>
		</filter>
		<filter title="Skill workers">
			<domain>self.macroCategorySelect = 4 OR self.macroCategorySelect = 5 OR self.macroCategorySelect = 6</domain>
		</filter>
	</search-filters>
	
</object-views>
  