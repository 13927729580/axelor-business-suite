<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">

	<grid name="employee-grid" title="Employee"	model="com.axelor.apps.organisation.db.Employee">
		<field name="name" />
		<field name="firstName" />
	</grid>

	<form name="employee-form" title="Employee"	model="com.axelor.apps.organisation.db.Employee" cols="4"
	onNew="action-employee-default-record">
		<group name="header" cols="6" colSpan="6">
			<group colSpan="1">
            	<field name="picture" widget="image"/>
        	</group>
        	<group colSpan="3" cols="6" showTitle="false" css="highlight">
				<field name="titleSelect" showTitle="false" readonly="true"/>
        		<field name="name" showTitle="false" readonly="true"/>
				<field name="firstName" showTitle="false" readonly="true"/>
        	</group>
        	<break/>
        	<group colSpan="3" cols="6">
				<field name="titleSelect" hideIf="$readonly()"/>
        		<field name="name" hideIf="$readonly()"/>
				<field name="firstName" hideIf="$readonly()"/>
        	</group>
        	<break/>
			<group title="Contract Details" cols="6" colSpan="6">
				<field name="dailySalaryCost" />
				<field name="entryDate" />
				<field name="exitDate" />
				<field name="companyDepartment"/>
				<field name="macroCategorySelect" />
				<field name="categorySelect" />
			</group>
		</group>
		<notebook colSpan="4">
			<page title="Additionnal information">
				<field name="internalContact" />
				<field name="phoneAtCustomer" />
				<field name="emergencyContact" domain="self.isContact = True"/>
				<field name="emergencyNumber"/>
				<spacer/>
				<break/>
				<field name="personalInfo" widget="NestedEditor" summary-view="true" form-view="personal-info-edit-form"/>
				<field name="candidate"/>
			</page>
			<page title="Profile">
				<group title="-" cols="4" colSpan="4">
					<group title="Keywords" colSpan="2">
						<field name="toolKeywordSet" domain="self.typeSelect = '1'" colSpan="2" grid-view="keyword-tool-grid" form-view="keyword-tool-form" widget="TagSelect[create=keyWord]"/>
						<field name="fieldKeywordSet" domain="self.typeSelect = '2'" colSpan="2" grid-view="keyword-area-grid" form-view="keyword-area-form" widget="TagSelect[create=keyWord]"/>
						<field name="jobKeywordSet" domain="self.typeSelect = '3'" colSpan="2" grid-view="keyword-profession-grid" form-view="keyword-profession-form" widget="TagSelect[create=keyWord]"/>
					</group>
					<group title="Companies" colSpan="2">
						<field name="partnerSet" colSpan="4" grid-view="company-grid" domain="self.isContact = 'true'"/>
					</group>
				</group>
				<field name="positionList" colSpan="4"/>	
			</page>
			<page title="Salary/Expenses/Leaves">
				<notebook>
					<page title="Salary">
						<field name="bonusList" grid-view="bonus-grid" colSpan="2"/>
						<field name="advanceList" grid-view="advance-grid" colSpan="2"/>
						<field name="vehicleFiscalPower"/>
						<group title="Fixed salary">
							<field name="salaryFromDate"/>
							<field name="salaryAmount"/>
						</group>
						<field name="paySheetList" grid-view="pay-sheet-employee-grid" form-view="pay-sheet-employee-form" colSpan="4"/>
					</page>
					<page title="Travel expense">
						<group title="Commute expenses">
							<field name="commuteFee"/>
							<field name="commuteFeeRefundPerc"/>
						</group>
						<field name="expenseList" colSpan="4" grid-view="expense-edit-grid"/>
					</page>
					<page title="Leaves">	
						<field name="employeeLeaveList" colSpan="4"/>
					</page>
				</notebook>
			</page>
			<page title="Competences">
				<field name="competence" widget="NestedEditor" summary-view="true" form-view="competence-edit-form" hidden="true"/>
			</page>
			<page title="Hierarchy">
				<field name="supervisedBySelect" />
				<field name="managerUserInfo" showIf="supervisedBySelect == 1"/>
				<field name="managerProfileProduct" domain="self.applicationTypeSelect = 2"/>
				<field name="profileProduct" domain="self.applicationTypeSelect = 2"/>
			</page>
			<page title="Reporting">
				<group title="Action(s)" colSpan="4" cols="4">
					<button name="showEmployee" title="Print" colSpan="1" icon="img/icons/print.png" onClick="save,action-partner-method-show-employee"/>
				</group>
			</page>
			<!-- <page title="Suivi du placement des besoins" hidden="true"> -->
			<!-- <field name="placementFollowUpList" grid-view="placement-follow-up-edit-grid" 
				form-view="placement-follow-up-edit-list"></field> -->
			<!-- </page> -->
		</notebook>
	</form>
	
	<action-record name="action-employee-default-record" model="com.axelor.apps.organisation.db.Employee">
    	<field name="entryDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" if="entryDate == null"/>
    	<field name="categorySelect" expr="1"/>
    	<field name="macroCategorySelect" expr="4"/>
    </action-record>
	
	<action-method name="action-partner-method-show-employee">
		<call class="com.axelor.apps.organisation.web.EmployeeController" method="showEmployee" />
	</action-method>
    
    <search-filters name="employee-filters" model="com.axelor.apps.organisation.db.Employee" title="Employee filters">
		<filter title="Current Employees">
			<domain>self.exitDate IS NULL</domain>
		</filter>
		<filter title="Old Employees">
			<domain>self.exitDate &lt; CURRENT_DATE</domain>
		</filter>
		<filter title="Managers">
			<domain>self.macroCategorySelect = 1 OR self.macroCategorySelect = 2 OR self.macroCategorySelect = 3</domain>
		</filter>
		<filter title="Skill workers">
			<domain>self.macroCategorySelect = 4 OR self.macroCategorySelect = 5 OR self.macroCategorySelect = 6</domain>
		</filter>
	</search-filters>
	
</object-views>
  