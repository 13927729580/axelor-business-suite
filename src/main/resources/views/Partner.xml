<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.1.xsd">
    
   <!-- <form name="partner-form"  id="account-partner-form" title="Partner" model="com.axelor.apps.base.db.Partner"   colWidths="25*" 
    onNew="action-partner-record-partner-type-select,action-partner-record-set-default,action-partner-record-customer-supplier-type,action-partner-attrs-set-readonly"
    onLoad="action-partner-attrs-change-name,action-partner-attrs-set-readonly" 
    onSave="save,action-set-partner-seq,action-create-accounting-situation">
	    <toolbar>
	        <button name="sendByEmail" title="Send email" icon="fa-envelope" onClick="save,action-send-by-email-with-template" readonlyIf="id == null"/>
	        <button name="showPartnerInfo" title="Print Informations" icon="fa-print" onClick="save,action-partner-method-show-partner-info" readonlyIf="id == null"/>
	        <button name="showClientSituationForm" title="Client Situation" icon="fa-print" onClick="save,action-partner-method-show-client-situation" showIf="isContact == false" readonlyIf="id == null"/>
	    </toolbar>
	    <menubar>
	        <menu title="Actions" icon="img/16px/create_16px.png" showTitle="true">
	            <item title="Create call" action="save,action-partner-view-create-call" readonlyIf="id == null"/>
	            <item title="Schedule meeting" action="save,action-partner-view-create-meeting" readonlyIf="id == null"/>
	            <item title="Create task" action="save,action-partner-view-create-task" readonlyIf="id == null"/>
	            <item title="Create opportunity" action="save,action-partner-view-create-opportunity" readonlyIf="id == null"/>
	        </menu>
	    </menubar>
	    <group    >
	        <group    >
	            <group  >
	                <field name="picture" showTitle="false" widget="Image"/>
	            </group>
	            <break/>
	            <group   showIf="id != null">
	                <button name="facebook" css="img-button" icon="img/Other/facebookLogo_75px.png" onClick="action-partner-view-sn-profile"/>
	                <button name="linkedin" css="img-button" icon="img/Other/linkedinLogo_57px.png" onClick="action-partner-view-sn-profile"/>
	                <button name="twitter" css="img-button" icon="img/Other/twitterLogo_54px.png" onClick="action-partner-view-sn-profile"/>
	            </group>
	        </group>
	        <group  >
	            <field name="titleSelect" showTitle="false" hideIf="partnerTypeSelect != 2" placeholder="Civility"/>
	            <break/>
	            <field name="name" showTitle="false" css="highlight" placeholder="Name" onChange="action-partner-record-full-name"/>
	            <break/>
	            <field name="firstName" showTitle="false" hideIf="partnerTypeSelect != 2" css="highlight" placeholder="First name" onChange="action-check-string-camel-case,action-partner-record-full-name"/>
	            <break/>
	            <field name="partnerTypeSelect" showTitle="false" onChange="action-partner-attrs-change-name"/>
	        </group>
	        <group    >
	            <field name="contactPartnerSet" hideIf="isContact || partnerTypeSelect == 2"   domain="self.isContact = 'true'" form-view="partner-contact-form" grid-view="partner-contact-grid"/>    
	        </group>
	    </group>
	    <break/>
	    <notebook  >
	        <page name="information" title="Informations">
	            <group     hideIf="isContact">
                    <field name="customerTypeSelect" hideIf="(isContact &amp;&amp; partnerTypeSelect == 2)"/>
                    <field name="supplierTypeSelect" hideIf="partnerTypeSelect == 2 || isContact"/>
	            </group>
	            <group title="Partner Details" hideIf="partnerTypeSelect == 2"    >
	                <group    >
	                    <field name="partnerCategory" widget="SuggestBox"/>
	                    <field name="industrySectorSelect"/>
	                    <field name="source" hideIf="isContact"/>
	                    <field name="site" domain="self.partner.id = :id"/>
	                    <field name="department"/>
	                </group>
	                <group    >
	                    <field name="saleTurnover"/>
	                    <field name="nbrEmployees"/>
	                    <field name="registrationCode"/>
	                    <field name="taxNbr"/>
	                    <field name="parentPartner" hideIf="partnerTypeSelect != 1" domain="self.isContact = false AND self.partnerTypeSelect = 1"/>
	                </group>
	            </group>
	            <group title="Contacts details" hideIf="partnerTypeSelect == 2 || !isContact"    >
	                <field name="mainPartner" hideIf="!isContact"/>
	                <field name="source" hideIf="!isContact"/>
	                <field name="reportsTo" hideIf="!isContact"/>
	                <field name="jobTitle" hideIf="!isContact"/>
	            </group>
	            <group title="Postal addresses"    >
	                <field name="deliveryAddress" onChange="action-partner-record-main-invoicing-address"/>
	                <field name="mainInvoicingAddress"/>
	            </group>
	            <group title="Contact"    >
	                <field name="fixedPhone"/>
	                <field name="mobilePhone" hideIf="partnerTypeSelect == 1"/>
	                <field name="emailAddress" canSelect="false" canNew="false" form-view="email-address-simple-form"/>
	                <field name="fax"/>
	                <field name="webSite"/>
	            </group>
	        </page>
	        <page title="Notes">
	            <field name="description" showTitle="false"   widget="Html" x-lite="true"/>
	        </page>
	        <page name="payment" title="Invoicing/Payment" hideIf="partnerTypeSelect == 2 || isContact"    >
	            <field name="invoiceSendingFormatSelect"/>
	            <field name="paymentMode"/>
	            <field name="paymentCondition"/>
	            <field name="currency" requiredIf="!isContact &amp;&amp; partnerTypeSelect != 2"/>
	            <field name="fiscalPosition"/>
	            <field name="payerQuality"/>
	            <field name="bankDetails" widget="SuggestBox" domain="self.partner.id = :id"/>
	            <field name="bankDetailsList" showTitle="false"   form-view="bank-details-form" grid-view="bank-details-grid"/>
	            <button name="showAllInvoices" title="Show invoices"   onClick="save,action-partner-view-partner-invoice"/>
	            <button name="showUnpaidInvoice" title="View all unpaid invoices"   onClick="save,action-partner-view-show-unpaid-invoice"/>
	        </page>
	        <page title="Settings"  >
	            <field name="partnerSeq"/>
	            <field name="languageSelect"/>
	            <group title="Assigned to"     canCollapse="true">
	                <field name="companySet"   widget="TagSelect" x-create="name" form-view="company-lite-form" onChange="action-partner-company-set-validate"/>
	                <break/>
	                <field name="user"/>
	                <field name="team"/>
	            </group>
	        </page>
	        <page name="compteClient" title="Customer balance" hideIf="isContact">
	            <field name="accountingSituationList"   widget="MasterDetail" grid-view="accounting-situation-partner-grid" form-view="accounting-situation-partner-form" onSelect="action-account-accounting-situation-method-update-customer-account"/>
	        </page>
	        <page name="blocking" title="Blockings" hideIf="isContact">
	            <field name="blockingList"   widget="MasterDetail" showTitle="false"/>
	        </page>
	        <page name="reportedBalance" title="Reported balance" hideIf="isContact || id == null">
	            <field name="reportedBalanceList"  >
	                <grid title="Reported balances" >
	                    <field name="company"/>
	                </grid>
	                <form   title="Reported balance" >
	                    <field name="company" widget="SuggestBox"/>
	                    <field name="reportedBalanceLineList"  >
	                        <grid title="Reported balance lines" >
	                            <field name="year"/>
	                            <field name="amount"/>
	                        </grid>
	                        <form    title="Reported balance line" >
	                            <field name="year"/>
	                            <field name="amount"/>
	                        </form>
	                    </field>
	                </form>
	            </field>
	        </page>
         	<page title="SEPA Direct Debit"   showIf="paymentMode.typeSelect == 2">   
                 <field name="activeRum"   canNew="false" domain="self.partner.id = :id"/>
                 <separator title="History"  />
                 <field name="rumList" showTitle="false"  />
            </page>
		    <page name="activities" title="Activities" showIf="id != null">
	        	<button name="showProject" title="Show projects"   onClick="save,action-partner-view-partner-project"/>
			    <portlet   action="action-partner-view-upcoming-events"/>
			    <portlet   action="action-partner-view-historical-events-completed"/>
			    <portlet   action="action-partner-view-opportunities"/>
			    <portlet   action="action-partner-view-sale-orders"/>
			    <portlet   action="action-partner-view-tickets"/>
	        </page>
			<page name="turnover" title="Sales" showIf="id != null" if-module="axelor-supplychain">
				<portlet   action="portal.customer.sales.lastYear.vs.ytd.by.family" height="350"/>
			</page>
			<page name="events" title="Events" showIf="id != null" if-module="axelor-crm">
     			 <portlet   action="portal.customer.crm.activities" height="350"/>
			</page>
	    </notebook>
	</form>  --> 
	
	<form name="incl-invoice-payment-partner-form"   title="Partner" model="com.axelor.apps.base.db.Partner">
	    <panel title="Overview">
	    	<field name="invoiceSendingFormatSelect"/>
	        <field name="paymentMode"/>
	        <field name="paymentCondition"/>
	        <field name="currency" requiredIf="!isContact &amp;&amp; partnerTypeSelect != 2"/>
	        <field name="fiscalPosition"/>
	        <field name="payerQuality"/>
	        <field name="bankDetails" widget="SuggestBox" domain="self.partner.id = :id"/>
	    </panel>
	    <panel-related field="bankDetailsList" showTitle="false"  form-view="bank-details-form" grid-view="bank-details-grid" colSpan="12"/>
	    <panel-side title="Actions">
	    	<button name="showAllInvoices" title="Show invoices"  onClick="save,action-partner-view-partner-invoice"/>
        	<button name="showUnpaidInvoice" title="View all unpaid invoices"  onClick="save,action-partner-view-show-unpaid-invoice"/>
	    </panel-side>
	    
       
        
	</form>
	
	<form name="incl-customer-balance-partner-form"   title="Partner" model="com.axelor.apps.base.db.Partner" >
	    
	    <panel-related field="accountingSituationList" colSpan="12" widget="MasterDetail" grid-view="accounting-situation-partner-grid" form-view="accounting-situation-partner-form" onSelect="action-account-accounting-situation-method-update-customer-account"/>
	</form>
	
	<form name="incl-blocking-partner-form" title="Partner" model="com.axelor.apps.base.db.Partner" >
	     <panel-related  field="blockingList" colSpan="12" widget="MasterDetail" showTitle="false"/>
	</form>
	
	<form name="incl-reported-balance-partner-form" title="Partner" model="com.axelor.apps.base.db.Partner" >
         <panel-related field="reportedBalanceList" colSpan="12"/>
	</form>
	
	<!-- TODO: find the domain of below form and grid and add it in reportedBalanceList in above form-->

<!-- 	<grid  title="Reported balances" > -->
<!--         <field name="company"/> -->
<!--     </grid> -->
<!--              <form   title="Reported balance" > -->
<!--                  <field name="company" widget="SuggestBox"/> -->
<!--                  <field name="reportedBalanceLineList"  > -->
<!--                      <grid title="Reported balance lines" > -->
<!--                          <field name="year"/> -->
<!--                          <field name="amount"/> -->
<!--                      </grid> -->
<!--                      <form    title="Reported balance line" > -->
<!--                          <field name="year"/> -->
<!--                          <field name="amount"/> -->
<!--                      </form> -->
<!--                  </field> -->
<!--              </form> -->
	
	<form name="incl-sepa-direct-debit-partner-form" title="Partner" model="com.axelor.apps.base.db.Partner">
          <panel title="Overview">
          	 <field name="activeRum"  canNew="false" domain="self.partner.id = :id"/>
          </panel>
          <panel-related field="rumList" title="History" colSpan="12"/>
	</form>
	
	<action-method name="action-create-accounting-situation" >
		<call class="com.axelor.apps.account.web.PartnerController" method="createAccountingSituations" />
	</action-method>
	
	<action-view name="action-partner-view-partner-invoice" title="Invoices" model="com.axelor.apps.account.db.Invoice">
		<view type="grid" name="invoice-grid"/>
		<view type="form" name="invoice-form"/>
		<domain>self.partner.id = :id</domain>
		<context name="id" expr="eval: id"/>
	</action-view>
	
	<action-view name="action-partner-view-show-unpaid-invoice" title="Unpaid invoices" model="com.axelor.apps.account.db.Invoice">
		<view type="grid" name="invoice-grid"/>
		<view type="form" name="invoice-form"/>
		<domain>self.partner.id = :id AND self.inTaxTotalRemaining > 0</domain>
		<context name="id" expr="eval: id"/>
	</action-view>
	
	<action-record name="action-partner-record-main-invoicing-address" model="com.axelor.apps.base.db.Partner">
    	<field name="mainInvoicingAddress" expr="eval: deliveryAddress" if="mainInvoicingAddress == null"/>
    </action-record>
	
	<action-method name="action-partner-method-show-client-situation" >
		<call class="com.axelor.apps.base.web.PartnerController" method="printClientSituation"/>
	</action-method>
	
</object-views>
