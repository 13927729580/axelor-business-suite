<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
    
<!--     MOVE LINE REPORT -->
    
    <grid name="move-line-report-grid" title="Accounting reports" model="com.axelor.apps.account.db.MoveLineReport">
        <field name="ref"/>
        <field name="date"/>
		<field name="company"/>
		<field name="exportTypeSelect"/>
		<field name="typeSelect" selection="move.line.report.type.select"/>
        <field name="dateFrom"/>
        <field name="dateTo"/>
        <field name="period"/>
        <field name="journal"/>
        <field name="account"/>
        <field name="totalDebit"/>
		<field name="totalCredit"/>
		<field name="balance"/>
		<field name="status"/>
		<field name="publicationDateTime"/>
    </grid>
    
    <form name="move-line-report-form" title="Accounting report" model="com.axelor.apps.account.db.MoveLineReport" cols="4" 
	    onNew="action-move-line-report-default-record,action-move-line-report-date-readonly"
	    onLoad="action-move-line-report-button-hidden,action-move-line-report-date-readonly"
	    onSave="action-move-line-report-method-get-sequence">
	    
	    <field name="ref" readonly="true"/>
    	<field name="date"/>
    	<field name="typeSelect" selection="move.line.report.type.select" onChange="action-move-line-report-record,action-move-line-report-method-get-journal-type,action-move-line-report-record-default,action-move-line-report-method-get-account"/>
		<field name="exportTypeSelect"/>
		<field name="company" widget="SuggestBox" form-view="company-lite-form" onChange="action-move-line-report-method-get-account" readonlyIf="ref != null"/>
		<break/>
		<separator colSpan="4"/>
	    <button name="search" title="Search" onClick="save,action-move-line-report-method-search-move-line,save" colSpan="2" hideIf="typeSelect == 12" />
        <button name="export" title="Print" icon="icon-print" onClick="save,action-move-line-report-method-print-export-moveLine,action-move-line-report-method-get-reload,action-move-line-report-button-hidden,action-move-line-report-date-readonly" colSpan="2"/>
		<field name="status"/>
		<field name="publicationDateTime"/>
		<break/>
    	<notebook colSpan="4">
	    	<page title="Filter" colSpan="4">
				<field name="cashRegister" hideIf="!typeSelect || [0,2,3,4,12].indexOf(typeSelect) != -1"/>
				<field name="period" onSelect="action-move-line-report-attrs-period-domain" onChange="action-move-line-report-record-year,action-move-line-report-record-date-from-and-date-to"/>
				<field name="year" onSelect="action-move-line-report-attrs-year-domain" hideIf="typeSelect != 12" requiredIf="typeSelect == 12"/>
				<break/>
		        <field name="dateFrom" onChange="action-move-Live-report-record-set-date-to" requiredIf="typeSelect == 12"/>
		        <field name="dateTo" requiredIf="typeSelect == 12"/>
		        <field name="journal" hideIf="!typeSelect || [0,2,3,4,5,10,12,13].indexOf(typeSelect) != -1"/>
		        <field name="account" hideIf="!typeSelect || [0,5,10,12].indexOf(typeSelect) != -1" requiredIf="typeSelect == 13"/>
		        <field name="paymentMode" hideIf="!typeSelect || [2,3,4,5,10,12,13].indexOf(typeSelect) != -1"/>
		        <field name="partner" domain="self.isContact = false" grid-view="partner-grid" form-view="partner-form" hideIf="!typeSelect || [0,5,10,12,13].indexOf(typeSelect) != -1"/>
		        <break/>
		        <field name="fromPartner" grid-view="partner-grid" form-view="partner-form" hideIf="!typeSelect || [0,1,5,10,11,12,13].indexOf(typeSelect) != -1"/>
		        <field name="toPartner" grid-view="partner-grid" form-view="partner-form" hideIf="!typeSelect || [0,1,5,10,11,12,13].indexOf(typeSelect) != -1"/>
		    </page>
		    <page title="Printing informations">
		    	<field name="global" onChange="action-move-line-report-record-global" hideIf="!typeSelect || [0,3,4,10,12,13].indexOf(typeSelect) != -1"/>
	        	<field name="globalByPost" onChange="action-move-line-report-record-global-by-post" hideIf="!typeSelect || [0,2,3,4,11,12,13].indexOf(typeSelect) != -1"/>
	        	<field name="globalByDate" onChange="action-move-line-report-record-global-by-date" hideIf="!typeSelect || [2,3,4,5,10,11,12,13].indexOf(typeSelect) != -1"/>
	        	<field name="globalByPartner" onChange="action-move-line-report-record-global-by-partner" hideIf="typeSelect != 3"/>
	        	<field name="detailed" onChange="action-move-line-report-record-detailed" hideIf="typeSelect != 4"/>
		    </page>
        </notebook>
		<field name="totalDebit"/>
		<field name="totalCredit"/>
		<field name="balance"/>
    </form>
    
    
<!--     MOVE LINE EXPORT -->
    
    <grid name="move-line-report-export-grid" title="Accounting exports" model="com.axelor.apps.account.db.MoveLineReport">
        <field name="ref"/>
        <field name="date"/>
		<field name="company"/>
		<field name="typeSelect" selection="move.line.report.type.select.export"/>
        <field name="dateFrom"/>
        <field name="dateTo"/>
        <field name="period"/>
        <field name="journal"/>
        <field name="totalDebit"/>
		<field name="totalCredit"/>
		<field name="balance"/>
		<field name="status"/>
    </grid>
    
    <form name="move-line-report-export-form" title="Accounting export" model="com.axelor.apps.account.db.MoveLineReport" cols="4" 
	    onNew="action-move-line-report-default-record,action-move-line-report-button-hidden,action-move-line-report-date-readonly"
	    onLoad="action-move-line-report-button-hidden,action-move-line-report-date-readonly"
	    onSave="action-move-line-report-method-get-sequence">
    	<notebook colSpan="4">
	    	<page title="Search" colSpan="4">
		    	<field name="ref" readonly="true"/>
		    	<field name="date"/>
		    	<field name="typeSelect" selection="move.line.report.type.select.export" onChange="action-move-line-report-record,action-move-line-report-method-get-journal-type,action-move-line-report-record-default,action-move-line-report-method-get-account"/>
				<field name="company" widget="SuggestBox" onChange="action-move-line-report-method-get-account" readonlyIf="ref != null"/>
				<break/>
		        <field name="dateFrom" onChange="action-move-Live-report-record-set-date-to"/>
		        <field name="dateTo"/>
		        <field name="period" onSelect="action-move-line-report-attrs-period-domain" onChange="action-move-line-report-record-year,action-move-line-report-record-date-from-and-date-to"/>
		        <field name="journal"/>
		        <break/>
		        <button name="search" title="Search" onClick="save,action-move-line-report-method-search-move-line,save" colSpan="2"/>
		        <button name="export" title="Export" onClick="save,action-move-line-report-method-print-export-moveLine,action-move-line-report-method-get-reload,action-move-line-report-button-hidden,action-move-line-report-date-readonly" colSpan="2"/>
        		<button name="showMoveExported" title="Exported moves" onClick="save,action-move-line-report-method-show-move-exported" colSpan="2"/>
	       		<button name="replayExport" title="Run export again" onClick="save,action-move-line-report-method-replay-export" colSpan="2"/>
				<field name="status"/>
				<break/>
				<separator colSpan="4"/>
				<field name="totalDebit"/>
				<field name="totalCredit"/>
				<field name="balance"/>
		    </page>
        </notebook>
    </form>
    
<!--     ACTION ATTRS -->
	    
	<action-attrs name="action-move-line-report-date-readonly">
		<attribute name="readonly" for="date" expr="eval: status?.code == 'val'"/>
	</action-attrs>
	
	<action-attrs name="action-move-line-report-button-hidden">
		<attribute name="hidden" for="search" expr="eval: status?.code == 'val'" if="typeSelect in [null,0,6,7,8,9]"/>
		<attribute name="hidden" for="export" expr="eval: status?.code == 'val'" if="typeSelect in [null,0,6,7,8,9]"/>
		<attribute name="hidden" for="showMoveExported" expr="eval: status?.code != 'val'" if="typeSelect in [null,0,6,7,8,9]"/>
		<attribute name="hidden" for="replayExport" expr="eval: status?.code != 'val'" if="typeSelect in [null,0,6,7,8,9]"/>
	</action-attrs>
	
	<action-attrs name="action-move-line-report-attrs-period-domain">
		<attribute name="domain" for="period" expr="eval: &quot;self.year.id = ${year?.id}&quot;" if="eval: year != null"/>
		<attribute name="domain" for="period" expr="" if="eval: year == null"/>
	</action-attrs>
	
	<action-attrs name="action-move-line-report-attrs-year-domain">
		<attribute name="domain" for="year" expr="eval: &quot;self.company.id = ${company?.id}&quot;" if="eval: company != null"/>
	</action-attrs>
	
<!-- 	ACTION RECORD -->

	<action-record name="action-move-line-report-record-global" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="globalByPost" expr="eval: false"/>
		<field name="globalByDate" expr="eval: false"/>
		<field name="globalByPartner" expr="eval: false"/>
		<field name="detailed" expr="eval: false"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-global-by-post" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="global" expr="eval: false"/>
		<field name="globalByDate" expr="eval: false"/>
		<field name="globalByPartner" expr="eval: false"/>
		<field name="detailed" expr="eval: false"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-global-by-date" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="global" expr="eval: false"/>
		<field name="globalByPost" expr="eval: false"/>
		<field name="globalByPartner" expr="eval: false"/>
		<field name="detailed" expr="eval: false"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-global-by-partner" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="global" expr="eval: false"/>
		<field name="globalByPost" expr="eval: false"/>
		<field name="globalByDate" expr="eval: false"/>
		<field name="detailed" expr="eval: false"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-detailed" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="global" expr="eval: false"/>
		<field name="globalByPost" expr="eval: false"/>
		<field name="globalByDate" expr="eval: false"/>
		<field name="globalByPartner" expr="eval: false"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-year" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="year" expr="eval: period.year" if="eval : period != null"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-date-from-and-date-to" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="dateFrom" expr="eval: period.fromDate" if="eval : period != null"/>
		<field name="dateTo" expr="eval: period.toDate" if="eval : period != null"/>
	</action-record>
	
	<action-record name="action-move-line-report-record" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="cashRegister" expr="eval: null"/>
		<field name="account" expr="eval: null"/>
		<field name="paymentMode" expr="eval: null"/>
		<field name="partner" expr="eval: null"/>
		<field name="fromPartner" expr="eval: null"/>
		<field name="toPartner" expr="eval: null"/>
		<field name="global" expr="eval: null"/>
		<field name="globalByPost" expr="eval: null"/>
		<field name="globalByDate" expr="eval: null"/>
		<field name="globalByPartner" expr="eval: null"/>
		<field name="detailed" expr="eval: null"/>
		<field name="year" expr="eval: null"/>
		<field name="exportTypeSelect" expr="eval: null"/>
	</action-record>
	
	<action-record name="action-move-line-report-record-default" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="global" expr="eval: true" if="typeSelect in [1,2,5,11]"/>
		<field name="globalByPartner" expr="eval: true" if="typeSelect in [3]"/>
		<field name="detailed" expr="eval: true" if="typeSelect in [4]"/>
		<field name="globalByPost" expr="eval: true" if="typeSelect in [10]"/>
		<field name="exportTypeSelect" expr="eval: 'pdf'"/>
	</action-record>
	
	<action-record name="action-move-line-report-default-record" model="com.axelor.apps.account.db.MoveLineReport">
        <field name="status" expr="action:action-status-record-dra"/>
		<field name="date" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()"/>
		<field name="company" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveCompany()"/>
	</action-record>
	
	<action-record name="action-move-Live-report-record-set-date-to" model="com.axelor.apps.account.db.MoveLineReport">
		<field name="dateTo" expr="eval: dateFrom" if="dateFrom &amp;&amp; !dateTo"/>
	</action-record>
	
<!-- 	ACTION METHOD -->
	
	<action-method name="action-move-line-report-method-get-account">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="getAccount"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-get-reload">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="getReload"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-print-export-moveLine">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="printExportMoveLine"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-show-move-exported">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="showMoveExported"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-replay-export">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="replayExport"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-search-move-line">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="searchMoveLine"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-get-sequence">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="getSequence"/>
	</action-method>
	
	<action-method name="action-move-line-report-method-get-journal-type">
		<call class="com.axelor.apps.account.web.MoveLineReportController" method="getJournalType"/>
	</action-method>
	
    
</object-views>