<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">
	
	<!--  Partner Dashboard  -->
	
	<portal title="Partner Dashboard" name="base.partner.list.portal" cols="2">
		<portlet action="portal.my.recent.customers" height="350" colSpan="1" canSearch="true"/> 
	    <portlet action="portal.partner.by.salesman" height="350" colSpan="1" canSearch="true"/>
		<portlet action="portal.partner.recent.partners" height="350" colSpan="1" canSearch="true"/>	
		<portlet action="portal.partner.by.industrySector" height="350" colSpan="1" canSearch="true"/>
		<portlet action="portal.my.customers" height="350" colSpan="1" canSearch="true"/>
	 	<portlet action="portal.customers.by.country" height="350" colSpan="1" canSearch="true"/>
  	</portal>
	
	<action-view name="portal.my.recent.customers" title="My Recent Customers" model="com.axelor.apps.base.db.Partner">
		<view type="grid" name="partner-grid"/>
		<view type="form" name="partner-form"/>
		<domain>self.updatedOn &gt;= date(now())-30 AND self.userInfo=:user_info AND self.customerTypeSelect=3</domain>
	 	<context name="user_info" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserInfo()"/>
	</action-view>
	
	<action-view name="portal.partner.by.salesman" title="Customers by salesman" model="com.axelor.apps.base.db.Partner">
		<view type="grid" name="partner-grid-group"/>
		<view type="form" name="partner-form"/>
		<domain>self.customerTypeSelect=3</domain>
	</action-view>
	
	<action-view name="portal.partner.recent.partners" title="Recently created partners" model="com.axelor.apps.base.db.Partner" >
    	<view type="grid" name="partner-grid"/>
    	<view type="form" name="partner-form"/>
    	<domain>self.createdOn &gt;= date(now())-15</domain>
	</action-view>
	
	<action-view name="portal.my.customers" title="My Customers" model="com.axelor.apps.base.db.Partner">
		<view type="grid" name="partner-grid"/>
		<view type="form" name="partner-form"/>
		 <domain>self.userInfo = :userInfoId AND self.customerTypeSelect=3</domain>
		 <context name="userInfoId" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserInfo()"/>
	</action-view>
	
	<action-view name="portal.partner.by.industrySector" title="Partners by Industry Sector" model="com.axelor.apps.base.db.Partner">
		<view type="chart" name="chart.partner.by.industry.sector.bar" />
	</action-view>
	<action-view name="portal.customers.by.country" title="Customers by country" model="com.axelor.apps.base.db.Partner">
		<view type="chart" name="chart.customers.by.country.bar"/>
	</action-view>
  	
  	<!-- This Portlet is called in Partner-Form -->
	<action-view name="portal.customer.sales.lastYear.vs.ytd.by.family" title="Customer Sales turnover this year vs last year by family" model="com.axelor.apps.supplychain.db.SalesOrderLine">
	  <view type="chart" name="chart.customer.sales.lastYear.vs.ytd.by.family"/>
	  <domain>self.salesOrder.statusSelect=3 AND self.salesOrder.company=_company</domain>
	  <context name="_company" expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveCompany()" />
	</action-view>
  	
</object-views>