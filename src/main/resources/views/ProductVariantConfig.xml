<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.1.xsd">
   
    <grid name="product-variant-config-grid" title="Product variant configurations" model="com.axelor.apps.base.db.ProductVariantConfig">
        <field name="productVariantAttr1"/>
        <field name="productVariantAttr2"/>
        <field name="productVariantAttr3"/>
        <field name="productVariantAttr4"/>
        <field name="productVariantValue1Set"/>
        <field name="productVariantValue2Set"/>
        <field name="productVariantValue3Set"/>
        <field name="productVariantValue4Set"/>
    </grid>
    
    <form name="product-variant-config-form" title="Product variant configuration" model="com.axelor.apps.base.db.ProductVariantConfig"  
    	onLoad="action-product-variant-config-attrs-domain" onNew="action-product-variant-config-attrs-domain">
    	<panel>
        	<field name="productVariantAttr1" onChange="action-product-variant-config-attrs-domain"/>
        	<panel-related field="productVariantValue1Set" widget="TagSelect" canNew="false" showIf="productVariantAttr1" x-span="12"/>
	        <field name="productVariantAttr2" onChange="action-product-variant-config-attrs-domain" showIf="productVariantAttr1"/>
    	    <panel-related field="productVariantValue2Set" widget="TagSelect" canNew="false" showIf="productVariantAttr2" x-span="12"/>
	        <field name="productVariantAttr3" onChange="action-product-variant-config-attrs-domain" showIf="productVariantAttr2"/>
    	    <panel-related field="productVariantValue3Set" widget="TagSelect" canNew="false" showIf="productVariantAttr3" x-span="12"/>
	        <field name="productVariantAttr4" onChange="action-product-variant-config-attrs-domain" showIf="productVariantAttr3"/>
    	    <panel-related field="productVariantValue4Set" widget="TagSelect" canNew="false" showIf="productVariantAttr4" x-span="12"/>
        </panel>
    </form>
    
    <!-- ACTION ATTRS -->
    
    <action-attrs name="action-product-variant-config-attrs-domain">
    	<attribute name="domain" for="productVariantValue1Set" expr="eval: (productVariantAttr1?.productVariantValueList?.collect{it.id}?.size() &gt; 0) ? &quot;self.id IN (${productVariantAttr1?.productVariantValueList?.collect{it.id}?.join(',')})&quot; : &quot;self.id IN (null)&quot;"/>
    	<attribute name="domain" for="productVariantValue2Set" expr="eval: (productVariantAttr2?.productVariantValueList?.collect{it.id}?.size() &gt; 0) ? &quot;self.id IN (${productVariantAttr2?.productVariantValueList?.collect{it.id}?.join(',')})&quot; : &quot;self.id IN (null)&quot;"/>
    	<attribute name="domain" for="productVariantValue3Set" expr="eval: (productVariantAttr3?.productVariantValueList?.collect{it.id}?.size() &gt; 0) ? &quot;self.id IN (${productVariantAttr3?.productVariantValueList?.collect{it.id}?.join(',')})&quot; : &quot;self.id IN (null)&quot;"/>
    	<attribute name="domain" for="productVariantValue4Set" expr="eval: (productVariantAttr4?.productVariantValueList?.collect{it.id}?.size() &gt; 0) ? &quot;self.id IN (${productVariantAttr4?.productVariantValueList?.collect{it.id}?.join(',')})&quot; : &quot;self.id IN (null)&quot;"/>
    </action-attrs>
    
    

</object-views>