<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">
  
     <grid name="bank-statement-grid" title="Bank Statements" model="com.axelor.apps.account.db.BankStatement">
			<field name="name" />
			<field name="fromDate" />
			<field name="toDate" />
			<field name="journal" />
			<field name="startingBalance" />
			<field name="endingBalance" />
            <field name="statusSelect"/> 
     </grid>
  
    <form name="bank-statement-form" cols="4" title="Bank Statement" model="com.axelor.apps.account.db.BankStatement" 
    onNew="action-account-bank-statement-onnew-group" readonlyIf="statusSelect == 2">
		<group name="header" colSpan="3" cols="4">
			<field name="name" colSpan="2" />
			<break />
			<field name="company" onChange="action-bank-statement-set-currency" widget="SuggestBox"/>
			<field name="currency" />
			<field name="fromDate" />
			<field name="toDate" />
			<field name="journal" domain="self.statusSelect = 1 AND self.company = :company"/>
			<field name="cashAccount" domain="self.company = :company AND self.accountType.nameSelect='cash'"/>
		</group>
		<group title="Status" colSpan="1" cols="1">
			<field name="statusSelect" title="Status"/>
			<button name="validated" title="Validated" onClick="save,action-bank-statement-method-compute,action-bank-statement-method-validate" hideIf="statusSelect == 2"/>
		</group>
		<group title="Balance" colSpan="3" cols="4">
			<field name="startingBalance" />
			<field name="endingBalance" />
		</group>
		<break />
		<separator title="" colSpan="4" />
		<field name="bankStatementLineList" colSpan="4"/>
		<separator title="" colSpan="4" />
		<group colSpan="2" cols="4">
			<field name="computedBalance" />
			<button name="compute" title="Compute" onClick="save,action-bank-statement-method-compute" hideIf="statusSelect == 2"/>
		</group> 
	</form>
 
   <action-group name="action-account-bank-statement-onnew-group">
	   <action name="action-bank-statement-active-company"/>
	   <action name="action-bank-statement-set-months"/>
	   <action name="action-bank-statement-set-currency"/>
	   <action name="action-bank-statement-default-status"/>
   </action-group>
 
   <action-record model="com.axelor.apps.account.db.BankStatement" name="action-bank-statement-active-company">
       <field name="company" expr="eval:__user__.activeCompany"/>
   </action-record>
   
   <action-record model="com.axelor.apps.account.db.BankStatement" name="action-bank-statement-set-months">
       <field name="fromDate" expr="eval: LocalDate.parse(todayDate).withDayOfMonth(1)"/>
       <field name="toDate" expr="eval: LocalDate.parse(todayDate).toDateTimeAtCurrentTime().dayOfMonth().withMaximumValue().toLocalDate()"/>
   </action-record>
     
   <action-record model="com.axelor.apps.account.db.BankStatement" name="action-bank-statement-set-currency">
       <field name="currency" expr="eval: company?.currency"/>
   </action-record>
   
   <action-record model="com.axelor.apps.account.db.BankStatement" name="action-bank-statement-default-status">
       <field name="statusSelect" expr="1"/>
   </action-record>
   	
	<action-method name="action-bank-statement-method-compute">
		<call class="com.axelor.apps.account.web.BankStatementController" method="compute"/>
	</action-method>
	
	<action-method name="action-bank-statement-method-validate">
		<call class="com.axelor.apps.account.web.BankStatementController" method="validate"/>
	</action-method>
	 
    
</object-views>