<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
    
    <grid name="planning-line-grid" title="Planning lines" model="com.axelor.apps.organisation.db.PlanningLine">
        <field name="product"/>
        <field name="employee"/>
        <field name="task"/>
        <field name="fromDateTime"/>
        <field name="toDateTime"/>
        <field name="duration"/>
        <field name="unit"/>
        <field name="timeSheet"/>
    </grid>
    
    <form name="planning-line-form" title="Planning line" model="com.axelor.apps.organisation.db.PlanningLine" cols="4" 
    onNew="action-planningline-default-record">
        <field name="product"/>
        <field name="employee"/>
        <field name="task"/>
        <field name="fromDateTime" onChange="action-planning-line-method-compute-start-date-time"/>
        <field name="toDateTime" onChange="action-planning-line-method-compute-end-date-time"/>
        <field name="duration" onChange="action-planning-line-method-compute-duration"/>
        <field name="unit"/>
        <field name="timeSheet"/>
    </form>
    
    <grid name="planning-line-task-grid" title="Planning lines" model="com.axelor.apps.organisation.db.PlanningLine">
        <field name="product"/>
        <field name="employee"/>
        <field name="fromDateTime"/>
        <field name="toDateTime"/>
        <field name="duration"/>
        <field name="unit"/>
        <field name="timeSheet"/>
        <field name="planning"/>
    </grid>
    
    <form name="planning-line-tast-form" title="Planning line" model="com.axelor.apps.organisation.db.PlanningLine" cols="4" 
    onNew="action-planningline-default-record">
        <field name="product"/>
        <field name="employee"/>
        <field name="fromDateTime" />
        <field name="toDateTime" />
        <field name="duration" />
        <field name="unit"/>
        <field name="timeSheet"/>
        <field name="planning"/>
    </form>
    
    <action-record name="action-planningline-default-record" model="com.axelor.apps.organisation.db.PlanningLine">
    	<field name="fromDateTime" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDateTime()" if="fromDateTime == null"/>
    </action-record>
    
    <action-method name="action-planning-line-method-compute-start-date-time">
    	<call class="com.axelor.apps.organisation.web.PlanningLineController" method="computeStartDateTime"/>
    </action-method>
    
    <action-method name="action-planning-line-method-compute-end-date-time">
    	<call class="com.axelor.apps.organisation.web.PlanningLineController" method="computeEndDateTime"/>
    </action-method>
    
    <action-method name="action-planning-line-method-compute-duration">
    	<call class="com.axelor.apps.organisation.web.PlanningLineController" method="computeDuration"/>
    </action-method>
    
</object-views>