<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">

	 <form name="ticket-form" title="Ticket" model="com.axelor.apps.crm.db.Event" cols="6" colWidths="*,400" 
    onLoad="action-event-ticket-attrs-default" 
    onSave="action-event-set-sequence" 
    onNew="action-event-new-record,action-event-ticket-attrs-default">
	    <group colSpan="1" cols="4">
	        <group colSpan="2" cols="2" colWidths="100,*">
	            <separator title="Ticket NÂ°" colSpan="1" hideIf="$readonly()"/>
	            <separator title="Subject" colSpan="1" hideIf="$readonly()"/>
	            <field name="ticketNumberSeq" colSpan="1" showTitle="false" css="highlight" readonly="true"/>
	            <field name="subject" showTitle="false" colSpan="1" css="highlight" placeholder="Subject"/>
	        </group>
	        <separator title="Details" colSpan="4"/>
	        <group colSpan="2" cols="4">
	            <field name="eventCategory" widget="SuggestBox" domain="self.typeSelect = :typeSelect"/>
	            <field name="createdBy" readonly="true"/>
	            <field name="userInfo" onChange="action-event-record-ticket-responsible-user-info"/>
	            <field name="responsibleUserInfo"/>
	        </group>
	        <group colSpan="4" css="groupTitle" cols="6">
	                <separator title="Dates" colSpan="6"/>
	                <field name="startDateTime" onChange="action-event-method-compute-from-start-date-time"/>
	                <field name="endDateTime" onChange="action-event-method-compute-from-end-date-time"/>
	                <field name="duration" widget="duration[big=true]" onChange="action-event-method-compute-from-duration"/>
	        </group>
	    </group>
	    <group colSpan="1" cols="2">
	        <group title="Attributes" colSpan="2" cols="2" colWidths="10%,90%">
	            <field name="ticketStatusSelect"/>
	            <field name="prioritySelect"/>
	            <field name="progressSelect" widget="SelectProgress"/>
	        </group>
	        <group title="Linked to" colSpan="2" cols="2">
   	            <field name="project" domain="self.clientPartner = :clientPartner OR self.contactPartner = :contactPartner OR (:contactPartner = null AND :clientPartner = null)" required="true" form-view="project-form"/>
	            <field name="project" domain="self.clientPartner = :clientPartner OR self.contactPartner = :contactPartner OR (:contactPartner = null AND :clientPartner = null)" form-view="project-form"/>
	            <field name="task" domain="self.project = :project"/>
	            <field name="clientPartner" form-view="partner-form" grid-view="partner-grid"/>
	            <field name="contactPartner" domain="self.isContact = true" form-view="partner-contact-form" grid-view="partner-contact-grid"/>
	        </group>
	    </group>
	    <spacer/>
	    <break/>
	    <notebook colSpan="6">
	        <page title="Description">
	            <field name="description" showTitle="false" colSpan="6" widget="Html[lite=true]"/>
	        </page>
	        <page title="Comments">
	            <field name="messageList" showTitle="false" colSpan="6">
                     <grid title="Comments">
                        <field name="sentDate"/>
                        <field name="sender"/>
                        <field name="content" showTitle="false" colSpan="4" widget="Html[lite=true]"/>
                    </grid>
	                <form title="Comment">
	                    <group title="Informations" readonly="true" colSpan="4">
	                        <field name="sentDate"/>
	                        <field name="sender"/>
	                    </group>
	                    <group title="Content" colSpan="4">
	                        <field name="content" showTitle="false" colSpan="4" widget="Html[lite=true]"/>
	                    </group>
	                </form>
	            </field>
	        </page>
	        <page title="Watchers">
	            <field name="userInfoSet" showTitle="false" colSpan="6" widget="TagSelect" onSelect="action-event-attrs-watchers-domain"/>
	        </page>
	        <page title="Spent times" showIf="task != null">
	            <field name="spentTimeList" showTitle="false" colSpan="6" form-view="spent-time-ticket-form" grid-view="spent-time-ticket-grid"/>
	        </page>
	    </notebook>
	</form>

</object-views>
  