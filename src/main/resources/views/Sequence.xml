<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" 
xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_2.0.xsd">
    
  
    <grid name="sequence-grid" title="Sequences" model="com.axelor.apps.base.db.Sequence">
    	<toolbar>
    		<button name="reset" title="Reset" onClick="action-sequence-method-reset-all"/>
    	</toolbar>
        <field name="name"/>
        <field name="code" />
        <field name="company"/>
        <field name="prefixe"/>
        <field name="suffixe"/>
        <field name="padding"/>
        <field name="toBeAdded"/>
        <field name="nextNum"/>
    </grid>
    
    <form cols="6" name="sequence-form" title="Sequence" model="com.axelor.apps.base.db.Sequence"
    onNew="action-sequence-default,action-sequence-generic-attrs-tool-bar,action-sequence-attrs" 
    onLoad="action-sequence-attrs-tool-bar,action-sequence-attrs">
		<toolbar>
			<button name="reset" title="Reset" onClick="save,action-sequence-method-reset,save"/>
		</toolbar>
		<group colSpan="4">
			<field name="code" onChange="action-sequence-attrs"/>
			<break/>
			<field name="company" widget="SuggestBox"/>
			<break/>
			<field name="name"/>
		</group>
		<break/>
		<group title="Sequence Definition" colSpan="4">
			<field name="prefixe"/>
			<field name="suffixe"/>
			<spacer/>
			<break/>
			<field name="padding"/>
			<field name="toBeAdded"/>
			<field name="nextNum"/>
			<field name="yearlyResetOk" onChange="action-sequence-attrs-tool-bar"/>
		</group>
		<group colSpan="2" cols="4">
			<separator title="Tips" colSpan="4"/>
			<label title="The tags below can be used as a prefix or a suffix :" colSpan="4"/>
			<label title="%Y : Year" colSpan="4"/>
			<label title="%M : Month" colSpan="4"/>
			<label title="%D : Day" colSpan="4"/>
			<label title="%WY : Week number" colSpan="4"/>
		</group>
	</form>
    
    <!-- ACTION RECORD -->
    <action-record name="action-sequence-default" model="com.axelor.apps.base.db.Sequence">
    	<field name="padding" expr="3"/>
    	<field name="nextNum" expr="1"/>
    	<field name="toBeAdded" expr="1"/>
    </action-record>
    
    <!-- ACTION METHOD -->
    <action-method name="action-sequence-method-reset-all">
    	<call class="com.axelor.apps.base.web.SequenceController" method="resetAll"/>
    </action-method>
    
    <action-method name="action-sequence-method-reset">
    	<call class="com.axelor.apps.base.web.SequenceController" method="reset"/>
    </action-method>
    
    <!-- ACTION ATTRS -->
    
    <action-attrs name="action-sequence-attrs-tool-bar">
    	<attribute name="hidden" for="reset" expr="eval: !yearlyResetOk"/>
    </action-attrs>
    
    <action-attrs name="action-sequence-attrs">
    	<!-- COMPANY -->
    	<attribute name="hidden" for="company" expr="eval: code in ['contract','contractLine','invoicePaymentCondition','partner']"/>
    	<attribute name="required" for="company" expr="eval: !(code in ['contract','contractLine','invoicePaymentCondition','partner'])"/>
    	<!-- JOURNAL -->
    	<attribute name="hidden" for="journal" expr="eval: !(code in ['move','debit','paymentVoucherReceiptNo','debitReject','paymentVoucher'])"/>
    	<attribute name="required" for="journal" expr="eval: code in ['move','debit','paymentVoucherReceiptNo','debitReject','paymentVoucher']"/>
    </action-attrs>
    
</object-views>