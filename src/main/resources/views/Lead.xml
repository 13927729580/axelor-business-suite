<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
    
    <grid name="lead-grid" title="Leads" model="com.axelor.apps.crm.db.Lead">
        <field name="enterpriseName"/>
        <field name="name"/>
        <field name="firstName"/>
        <field name="contactDate"/>
        <field name="expectedCloseDate"/>
        <field name="campaign"/>
        <field name="statusSelect"/>
    </grid>
    
    <form cols="4" onNew="action-account-record-new,action-lead-default-record-new" name="lead-form" title="Lead" model="com.axelor.apps.crm.db.Lead">
    	<toolbar>
    		<button name="convertLead" title="Convert lead" onClick="action-lead-view-convert-lead" colSpan="1" hideIf="statusSelect == 4"/>
    	</toolbar>
    
 		<group title="Header" colSpan="4">
 			<group showTitle="false" colSpan="1">
	            <field name="picture" widget="image"/>
	        </group>
	        <group showTitle="false" colSpan="2" css="highlight">
	        	<field name="titleSelect" colSpan="1" showTitle="false" readonly="true"/>
	            <field name="name" colSpan="1" showTitle="false" readonly="true" />
		        <field name="firstName" colSpan="1" showTitle="false" readonly="true"/>
	        </group>
<!-- 	    	<group title="Actions" colSpan="1" cols="1" canCollapse="true" collapseIf="true"> -->
<!-- 	    		<button name="convertLead" title="Convert lead" colSpan="1" onClick="action-lead-method-convert-lead"  hideIf="statusSelect == 4"/> -->
<!-- 	    		<button name="scheduleMeeting" title="Schedule meeting" colSpan="1"/> -->
<!-- 	    		<button name="createTask" title="Create task" colSpan="1"/> -->
<!-- 	    		<button name="composeMessage" title="Compose email" colSpan="1"/> -->
<!-- 	    		<button name="createCall" title="Create call" colSpan="1"/> -->
<!-- 	    	</group> -->
	    	<group title="Links" colSpan="1" cols="1" canCollapse="true" collapseIf="true">
	    		<button name="showPartner" title="Show partner/contact"  colSpan="1"/>
	    		<button name="showMeetings" title="Show meetings"  colSpan="1"/>
	    		<button name="showTasks" title="Show tasks"  colSpan="1"/>
	    		<button name="showMessages" title="Show messages"  colSpan="1"/>
	    		<button name="showCalls" title="Show calls"  colSpan="1"/>
	    	</group>
 		</group>
 		
	    <group title="Informations" colSpan="4">
	    	<group title="Key information" colSpan="4" css="groupTitle" cols="6">
		    	<field name="titleSelect"/>
		        <field name="name"/>
		        <field name="firstName"/>
		        <field name="enterpriseName"/>
		        <field name="jobTitle"/>
		        <field name="email" widget="Email"/>
		        <field name="partner" showIf="statusSelect == 4"/>
	    	</group>
	    	<group title="Primary address" colSpan="2" cols="2">
	    		<field name="primaryAddress"/>
	    		<field name="primaryCity"/>
	    		<field name="primaryState"/>
	    		<field name="primaryPostalCode"/>
	    		<field name="primaryCountry"/>
	    	</group>
	    	<group title="Other address" colSpan="2" cols="2">
	    		<field name="otherAddress"/>
	    		<field name="otherCity"/>
	    		<field name="otherState"/>
	    		<field name="otherPostalCode"/>
	    		<field name="otherCountry"/>
	    		<field name="isCopyAddress" onChange="action-lead-record-other-address,action-lead-attrs-readonly-other-address"/>
	    	</group>
	        <group title="Extra information" colSpan="4" css="groupTitle" cols="6">
		        <field name="officeName"/>
		        <field name="department"/>
		        <field name="fax"/>
		        <field name="mobile"/>
		        <field name="webSite"/>
		       	<field name="contactDate"/>
		        <field name="description" widget="TEXT[height=3]" colSpan="6"/>
	        </group>
	        <break/>
	        <group title="Status details" colSpan="2" css="groupTitle" cols="2">
	            <field name="statusSelect"/>
	            <field name="statusDescription"/>
	        </group>
	        <group title="Source details" colSpan="2" css="groupTitle" cols="2">
	            <field name="source"/>
	            <field name="sourceDescription"/>
	        </group>
	        <group title="Marketing" colSpan="4" css="groupTitle" cols="6">
		        <field name="campaign"/>
		       	<field name="referredBy"/>
		        <field name="isDoNotCall" colSpan="2"/>
	        </group>
	    </group>
	    
	    <group title="Assigned to" canCollapse="true">
	        <field name="userInfo"/>
	        <field name="team"/>
	    </group>
	</form>
    
    <action-record name="action-lead-record-new" model="com.axelor.apps.crm.db.Lead">
    	<field name="company"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveCompany()"/>
    </action-record>
    
    <action-record name="action-lead-default-record-new" model="com.axelor.apps.crm.db.Lead">
    	<field name="statusSelect" expr="2"/>
    	<field name="contactDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" if="contactDate == null"/>
    	<field name="userInfo"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserInfo()"/>
    	<field name="team"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveTeam()"/>
    </action-record>
    
    <action-view name="action-lead-view-convert-lead" title="Convert lead" model="com.axelor.apps.base.db.Wizard">
		<view type="form" name="convert-lead-wizard-form"/>
		<context name="_lead" expr="eval: __self__"/>
		<context name="_titleSelect" expr="eval: titleSelect"/>
	</action-view>
    
    <action-record name="action-lead-record-other-address" model="com.axelor.apps.crm.db.Lead">
    	<field name="otherAddress" expr="eval: primaryAddress" if="!isCopyAddress"/>
    	<field name="otherCity" expr="eval: primaryCity" if="!isCopyAddress"/>
    	<field name="otherState" expr="eval: primaryState" if="!isCopyAddress"/>
    	<field name="otherPostalCode" expr="eval: primaryPostalCode" if="!isCopyAddress"/>
    	<field name="otherCountry" expr="eval: primaryCountry" if="!isCopyAddress"/>
    </action-record>
   	
   	<action-attrs name="action-lead-attrs-readonly-other-address">
   		<attribute name="readonly" for="otherAddress" expr="!$readonly()"/>
   		<attribute name="readonly" for="otherCity" expr="eval: !$readonly()"/>
   		<attribute name="readonly" for="otherState" expr="eval: !$readonly()"/>
   		<attribute name="readonly" for="otherPostalCode" expr="eval: !$readonly()"/>
   		<attribute name="readonly" for="otherCountry" expr="eval: !$readonly()"/>
   	</action-attrs>
   	 
</object-views>