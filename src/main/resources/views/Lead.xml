<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://apps.axelor.com/xml/ns/object-views"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
	xsi:schemaLocation="http://apps.axelor.com/xml/ns/object-views http://apps.axelor.com/xml/ns/object-views/object-views_0.9.xsd">
    
    <grid name="lead-grid" title="Leads" model="com.axelor.apps.crm.db.Lead">
        <field name="enterpriseName"/>
        <field name="name"/>
        <field name="firstName"/>
        <field name="contactDate"/>
        <field name="expectedCloseDate"/>
        <field name="campaign"/>
        <field name="statusSelect"/>
    </grid>
    
    <form cols="4" onNew="action-account-record-new,action-lead-default-record-new" name="lead-form" title="Lead" model="com.axelor.apps.crm.db.Lead">
    <toolbar>
    	<button name="convertLead" title="Convert lead" onClick="action-lead-method-convert-lead" colSpan="1"/>
    </toolbar>
 
    <group title="Informations" colSpan="4">
    	<group title="Key information" colSpan="4" css="groupTitle" cols="6">
	    	<field name="titleSelect"/>
	        <field name="name"/>
	        <field name="firstName"/>
	        <field name="enterpriseName"/>
	        <field name="jobTitle"/>
	        <field name="email" widget="Email"/>
    	</group>
        <group title="Extra information" colSpan="4" css="groupTitle" cols="6">
	        <field name="officeName"/>
	        <field name="department"/>
	        <field name="fax"/>
	        <field name="mobile"/>
	        <field name="webSite"/>
	       	<field name="contactDate"/>
	        <field name="description" widget="TEXT[height=3]" colspan="6"/>
        </group>
        <break/>
        <group title="Status details" colSpan="2" css="groupTitle" cols="2">
            <field name="statusSelect"/>
            <field name="statusDescription"/>
        </group>
        <group title="Source details" colSpan="2" css="groupTitle" cols="2">
            <field name="source"/>
            <field name="sourceDescription"/>
        </group>
        <group title="Marketing" colSpan="4" css="groupTitle" cols="6">
	        <field name="campaign"/>
	       	<field name="referredBy"/>
	        <field name="isDoNotCall" colSpan="2"/>
	        
        </group>
    </group>
    <group title="Assigned to" canCollapse="true">
        <field name="userInfo"/>
        <field name="team"/>
    </group>
</form>
    
    <action-record name="action-lead-record-new" model="com.axelor.apps.crm.db.Lead">
    	<field name="company"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveCompany()"/>
    </action-record>
    
    <action-record name="action-lead-default-record-new" model="com.axelor.apps.crm.db.Lead">
    	<field name="statusSelect" expr="eval: _statusSelect"/>
    	<field name="contactDate" expr="call:com.axelor.apps.base.service.administration.GeneralService:getTodayDate()" if="contactDate == null"/>
    	<field name="userInfo"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserInfo()"/>
    	<field name="team"  expr="call:com.axelor.apps.base.service.user.UserInfoService:getUserActiveTeam()"/>
    </action-record>
    
    <action-method name="action-lead-method-convert-lead">
		<call class="com.axelor.apps.crm.web.LeadController" method="convertLead"/>
    </action-method>
    
</object-views>