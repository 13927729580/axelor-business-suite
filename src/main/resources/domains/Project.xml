<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://apps.axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/domain-models http://apps.axelor.com/xml/ns/domain-models/domain-models_0.9.xsd">

  <module name="organisation" package="com.axelor.apps.organisation.db"/>

  <entity name="Project" lang="java">
  
  	<many-to-one name="clientPartner" ref="com.axelor.apps.base.db.Partner" title="Customer"/>
  	<many-to-one name="contactPartner" ref="com.axelor.apps.base.db.Partner" title="Contact"/>
  	<many-to-one name="company" ref="com.axelor.apps.base.db.Company" readonly="true" title="Société"/>
  	<string name="affairName" title="Affair name" required="true" namecolumn="true"/>
  	<string name="affairDescription" title="Affair description"/>
  	<string name="description" max="1000" multiline="true" title="Description"/>
  	<boolean name="isModel" title="Model ?"/>
  	<boolean name="isProject" title="Project ?"/>
  	<boolean name="isAffair" title="Affair ?"/>
  	<boolean name="isTimeSheetImputable" title="Timesheet input required ?"/>
  	<many-to-one name="defaultTask" ref="com.axelor.apps.organisation.db.Task" title="Default task"/>
  	<boolean name="isReinvoicingExpense" title="Reinvoicing of travel expense"/>
  	<boolean name="isReinvoicingTime" title="Reinvoicing time spent"/>
  	
  	<integer name="typeDurationSelect" title="Type duration" selection="organisation.project.type.duration.select"/>
  	<integer name="plannedDuration" title="Planned duration"/>
  	<!-- Financial informations -->
  	<decimal name="estimatedTurnover" title="Turnover"/>
  	<decimal name="estimatedCost" title="Cost"/>
  	<decimal name="estimatedMargin" title="Margin">
  		<![CDATA[
  			if (estimatedTurnover != null && estimatedCost != null) {
  				estimatedMargin = estimatedTurnover.subtract(estimatedCost);
  				return estimatedMargin;
  			}
  			return null;
  		]]>
  	</decimal>
  	<decimal name="confirmedTurnover" title="Turnover"/>
  	<decimal name="confirmedCost" title="Cost"/>
  	<decimal name="confirmedMargin" title="Margin">
  		<![CDATA[
  			if (confirmedTurnover != null && confirmedCost != null) {
  				confirmedMargin = confirmedTurnover.subtract(confirmedCost);
  				return confirmedMargin;
  			}
  			return null;
  		]]>
  	</decimal>
  	<decimal name="realizedTurnover" title="Turnover"/>
  	<decimal name="realizedCost" title="Cost"/>
  	<decimal name="realizedMargin" title="Margin">
  		<![CDATA[
  			if (realizedTurnover != null && realizedCost != null) {
  				realizedMargin = realizedTurnover.subtract(realizedCost);
  				return realizedMargin;
  			}
  			return null;
  		]]>
  	</decimal>
  	
  	<decimal name="plannedTime" title="Planned time"/>
  	<decimal name="spentTime" title="Spent Time"/>
  	<decimal name="remainingTime" title="Remaining time"/>
  	  
 	<decimal name="budgetedExpenses" title="Budgeted Expenses"/>
 	<decimal name="incurredExpenses" title="Incurred expenses"/>
 	<decimal name="remainingExpenses" title="Remaining expenses"/>
 	
 	<many-to-one name="parentProject" ref="com.axelor.apps.organisation.db.Project" title="Parent project"/>
 	<many-to-one name="projectUnit" title="Project unit" ref="com.axelor.apps.base.db.Unit"/>
  	
  	<one-to-many name="taskList" ref="com.axelor.apps.organisation.db.Task" mappedBy="project" title="Tasks"/>
	  	
  	<many-to-one name="responsibleUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Responsible"/>
  	<many-to-many name="memberUserInfoSet" ref="com.axelor.apps.base.db.UserInfo" title="Members"/>
  	
  	<many-to-one name="modelProject" ref="com.axelor.apps.organisation.db.Project" title="Project model"/>
  	<many-to-one name="preSalesTask" ref="com.axelor.apps.organisation.db.Task" title="Task"/>
  	<boolean name="imputExpense" title="Imputation note de frais"/>
  	<integer name="typeProjectSelect" title="Type select" selection="organisation.project.type.project.select"/>
  	
  	<boolean name="isAdministrative" title="Administrative ?"/>
  	
    <!-- Need -->
    <date name="consultationDate" title="Consultation Date"/>
    <string name="typeSelect" title="Type" selection="consulting.need.type.select"/>
    <date name="deadline" title="Deadline"/>
    <string name="complexity" title="Complexity" selection="grade.0.up.to.5.select"/>
	<string name="competition" title="Competition" selection="grade.0.up.to.5.select"/>
    <decimal name="plannedBudget" title="Planned budget"/>
    <string name="needDescription" title="Need Description" large="true"/>
    <binary name="specificationFile" title="Attach specification"/> 
    <datetime name="answerDate" title="Answer Date"/>
    <many-to-many name="candidateSet" title="Candidates" ref="com.axelor.apps.organisation.db.Candidate"/>
    <many-to-many name="employeeSet" title="Employees" ref="com.axelor.apps.organisation.db.Employee"/>
    <integer name="marketTypeSelect" title="Market Type" selection="organisation.affair.market.type.select"/>
    <string name="exportTypeSelect" title="Export Type" selection="organisation.project.report.type.select"/>
  </entity>

</domain-models>
