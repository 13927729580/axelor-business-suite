<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://apps.axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/domain-models http://apps.axelor.com/xml/ns/domain-models/domain-models_0.9.xsd">

  <module name="supplychain" package="com.axelor.apps.supplychain.db"/>

  <entity name="SalesOrder" lang="java">
  	
  	<many-to-one name="company" ref="com.axelor.apps.base.db.Company" required="true" title="Société"/>
  	<integer name="importId" />
  	<string name="salesOrderSeq" namecolumn="true" title="Reference" readonly="true"/>
  	<many-to-one name="affairProject" ref="com.axelor.apps.organisation.db.Project" title="Affair"/>
  	<many-to-one name="currency" ref="com.axelor.apps.base.db.Currency" required="true" title="Currency"/>
  	<string name="externalReference" title="Customer reference"/>
  	<date name="creationDate" title="Creation date" required="true" readonly="true"/>
  	<date name="validationDate" title="Validation date" readonly="true"/>
  	<many-to-one name="project" ref="com.axelor.apps.organisation.db.Project" title="Select project"/>
	<many-to-one name="location" ref="com.axelor.apps.supplychain.db.Location" title="Location"/>
	
<!--   	Onglet Coordonnées client -->
  	<many-to-one name="clientPartner" ref="com.axelor.apps.base.db.Partner" required="true" title="Customer"/>
  	<many-to-one name="contactPartner" ref="com.axelor.apps.base.db.Partner" title="Contact"/>
  	<many-to-one name="mainInvoicingAddress" ref="com.axelor.apps.base.db.Address" required="true" title="Invoicing address"/>
	<many-to-one name="priceList" ref="com.axelor.apps.base.db.PriceList" title="Price list"/>
    <many-to-one name="deliveryAddress" ref="com.axelor.apps.base.db.Address" required="true" title="Delivery address"/>  	
  
  	<boolean name="isToPrintLineSubTotal" title="Print subtotal per line"/>
  	<boolean name="hasSubLineDefaultValue" title="Default value for sublines"/>
  	<integer name="invoicingTypeSelect" title="Invoicing type" selection="sales.order.invoice.type.select"/>
  	
<!--   	Ligne de devis -->
	<boolean name="hasToCreateTaskByLine" title="Create a task per line ?"/>
	<boolean name="hasToCreateMoByLine" title="Create a M.O. per line ?"/>
	<boolean name="hasToCreateProposal" title="Create purchase orders ?"/>
	<one-to-many name="salesOrderLineList" ref="com.axelor.apps.supplychain.db.SalesOrderLine" mappedBy="salesOrder" title="Sale order lines"/>

<!--   	Ligne de TVA -->	
	<one-to-many name="salesOrderLineVatList" ref="com.axelor.apps.supplychain.db.SalesOrderLineVat" mappedBy="salesOrder" title="V.A.T. Lines"/>
  	
<!--   	<decimal name="exAllTaxTotal" title="Total HTT" scale="2" precision="20" readonly="true"/> -->
    <decimal name="exTaxTotal" title="Total W.V." scale="2" precision="20" readonly="true"/>
    <decimal name="vatTotal" title="Total V.A.T." scale="2" precision="20" readonly="true"/>
    <decimal name="inTaxTotal" title="Total A.T.I." scale="2" precision="20" readonly="true"/>
    <decimal name="amountRemainingToBeInvoiced" title="Amount remaining to invoice" readonly="true"/>
    <integer name="statusSelect" title="Status" selection="default.status.select" readonly="true"/>
  	
<!--   	Onglet Autres informations -->
	<many-to-one name="salesmanUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Salesman"/>
	<many-to-one name="team" ref="com.axelor.apps.base.db.Team" title="Team"/>
	<many-to-one name="paymentMode" ref="com.axelor.apps.account.db.PaymentMode" title="Payment mode"/>
    <many-to-one name="paymentCondition" ref="com.axelor.apps.account.db.PaymentCondition" title="Payment condition"/>
    <many-to-one name="source" ref="com.axelor.apps.base.db.Source" title="Source"/>
	
	<boolean name="showDetailsInInvoice" title="Show details in invoice"/>
	<integer name="invoicingMomentSelect" title="Invoicing trigger" selection="supplychain.invoicing.moment.select"/>
<!-- 	Onglet échéancier -->
	<one-to-many name="salesOrderScheduleLineList" ref="com.axelor.apps.supplychain.db.SalesOrderScheduleLine" mappedBy="salesOrder" title="Schedule line list"/>
    
<!--    Onglet historique -->
	<many-to-many name="invoiceSet" ref="com.axelor.apps.account.db.Invoice" title="Linked invoices"/>

<!-- 	Onglet Commande Client -->
    <date name="orderDate" title="Order Date"/>
    <string name="orderNumber" title="Order Number"/>
    
    <many-to-one name="validatedByUserInfo" ref="com.axelor.apps.base.db.UserInfo" readonly="true" title="Validated by"/>  	
    
  </entity>

</domain-models>
