<?xml version="1.0" encoding="UTF-8"?>
<domain-models xmlns="http://apps.axelor.com/xml/ns/domain-models"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/domain-models http://apps.axelor.com/xml/ns/domain-models/domain-models_0.9.xsd">

  <module name="base" package="com.axelor.apps.base.db"/>

  <entity name="Blocking" lang="java">
  
  	<integer name="importId"/>
  
    <many-to-one name="company" ref="com.axelor.apps.base.db.Company" title="Company"/>
    <many-to-one name="partner" ref="com.axelor.apps.base.db.Partner" title="Partner"/>    
    
    <!-- GROUP Direct Debit Blocking -->
    <boolean name="debitBlockingOk" title="Direct Debit Blocking ?"/>
    <date name="debitBlockingToDate" title="Block until"/>
    <many-to-one name="debitBlockingReason" ref="com.axelor.apps.base.db.StopReason" title="Blocking reason"/>
    <many-to-one name="debitBlockingByUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Blocking done by"/>
	<!-- GROUP Reminder Blocking -->
    <boolean name="reminderBlockingOk" title="Block Reminders ?"/>
    <date name="reminderBlockingToDate" title="Blocage jusqu au"/>
    <many-to-one name="reminderBlockingReason" ref="com.axelor.apps.base.db.StopReason" title="Blocking reason"/>
    <many-to-one name="reminderBlockingByUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Blocking done by"/>
	<!-- GROUP Blocage Facturation -->
    <boolean name="invoicingBlockingOk" title="Block Invoicing ?"/>
    <date name="invoicingBlockingToDate" title="Block until"/>
    <many-to-one name="invoicingBlockingReason" ref="com.axelor.apps.base.db.StopReason" title="Blocking reason"/>
    <many-to-one name="invoicingBlockingByUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Blocking done by"/>
    <!-- GROUP Blocage Remboursement -->
    <boolean name="reimbursementBlockingOk" title="Block Reimbursement"/>
    <date name="reimbursementBlockingToDate" title="Block until"/>
    <many-to-one name="reimbursementBlockingReason" ref="com.axelor.apps.base.db.StopReason" title="Blocking reason"/>
    <many-to-one name="reimbursementBlockingByUserInfo" ref="com.axelor.apps.base.db.UserInfo" title="Blocking done by"/>
        
    <string name="name" title="Référence" search="company,partner">
	    <![CDATA[
	    if(company != null && partner != null)
	    	return company.getCode() + " - " + partner.getName();    
    	else if(partner != null)
	    	return partner.getName();    
    	else if(company != null)
	    	return company.getCode();   
	   	else 
	   		return ""; 
	    ]]>
    </string>
    
  </entity>

</domain-models>
