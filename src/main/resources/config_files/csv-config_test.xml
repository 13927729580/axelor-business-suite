<?xml version="1.0" encoding="UTF-8"?>
<csv-inputs xmlns="http://apps.axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/data-import http://apps.axelor.com/xml/ns/data-import/data-import_0.9.xsd">
  	
  	
    <input file="auth_group.csv" separator=";" type="com.axelor.auth.db.Group" />
  	
  	<input file="base_country.csv" separator=";" type="com.axelor.apps.base.db.Country" />
  	
	<input file="Source.csv" separator=";" type="com.axelor.apps.base.db.Source">
		<bind column="name_fr" to="name"/>
	 	<bind column="code_fr" to="code"/>
	</input>
	  	
	<input file="Employees.csv" separator=";" type="com.axelor.apps.base.db.Partner" search="self.importId = :id" >
		<bind to="partnerTypeSelect" eval="'2'" />
		<bind to="importId" column="id" />
		<bind to="isContact" eval="true" />
		<bind to="companySet" search="self.code = 'TRSB'" >
			<bind to="name" eval="'TRSB'" />
			<bind to="code" eval="'TRSB'" />
		</bind>
		<bind column="first_name" to="firstName"/>
		<bind column="last_name" to="name"/>
		<bind column="phone_mobile" to="mobilePhone"/>
		<bind column="phone_work" to="fixedPhone"/>
		<bind column="phone_fax" to="fax"/>
	</input> 
	
	<input file="Employees.csv" separator=";" type="com.axelor.apps.base.db.UserInfo" search="self.importId = :id" >
		<bind to="importId" column="id" />
		<bind to="companySet" search="self.code = 'TRSB'" >
			<bind to="code" eval="'TRSB'" />
		</bind>
		<bind to="activeCompany" search="self.code = 'TRSB'" >
			<bind to="code" eval="'TRSB'" />
		</bind>
		<bind to="internalUser" search="self.code = :user_name" if="user_name != null &amp;&amp; !user_name.empty">
			<bind column="user_name" to="code"/>
			<bind column="user_name" to="name"/>
			<bind column="user_name" to="password"/>
			<bind column="name" to="description"/>
			<bind to="blocked" eval="status == 'Inactive' ? false:true"/>
			<bind to="groupId" search="self.code = 'admins'" update="true" >
	            <bind to="code" eval="'admins'"/>
	        </bind>
		</bind>
		<bind to="partner" search="self.importId = :id" update="true">
			<bind to="importId" column="id" />
		</bind>
		<bind to="activeTeam" search="self.name = :default_team" if="default_team != null &amp;&amp; !default_team.empty">
			<bind to="name" column="default_team" />
			<bind to="importId" column="default_team" />
		</bind>	
	</input>
	
	<input file="Accounts.csv" separator=";" type="com.axelor.apps.base.db.Partner" search="self.importId = :id" >
		<bind to="importId" column="id" />
		<bind column="name" to="name"/>
		<bind column="description" to="description"/>
		<bind to="isCustomer" eval="(account_type == 'Prospect' || account_type == 'Customer')  ? true:false" />
		<bind to="customerTypeSelect" eval="account_type == 'Prospect' ? 2 : account_type == 'Customer' ? 3:null" />
		<bind column="phone_fax" to="fax"/>
		<bind to="mainInvoicingAddress" search="self.importId = :id">
			<bind to="importId" column="id" />
	  		<bind to="addressL4" column="billing_address_street" />
	  		<bind to="addressL5" column="billing_address_state" />
	  		<bind to="addressL6" column="invoicing_addressL6" />
	  		<bind to="addressL7Country" search="self.code = :billing_address_country" update="true">
	  			<bind to="code" column="billing_address_country" eval="billing_address_country == 'FRANCE' ? 'FRA' : billing_address_country == 'MONACO' ? 'MCO': billing_address_country == 'USA' ? 'USA': billing_address_country == 'BELGIQUE' ? 'BEL' : null" />
	  		</bind>
  		</bind>
		<bind column="phone_office" to="fixedPhone"/>
		<bind column="phone_alternate" to="mobilePhone"/>
		<bind to="emailAddress" search="self.address = :email1" if="email1 != null &amp;&amp; !email1.empty">
			<bind to="address" column="email1" />
		</bind>
		<bind column="website" to="webSite"/>
		<bind to="userInfo" search="self.importId = :assigned_user_id" update="true">
			<bind to="importId" column="assigned_user_id" />
		</bind>
		<bind to="team" search="self.importId = :team_id" update="true" >
			<bind to="importId" column="team_id" />
		</bind>
	</input> 
	
	<input file="Accounts.csv" separator=";" type="com.axelor.apps.base.db.Partner" search="self.importId = :id" update="true">
		<bind to="parentPartner" search="self.importId = :parent_id" update="true">
			<bind column="parent_id" to="importId" />
		</bind>
		<bind column="id" to="importId" />
  	</input> 
  	
  	<input file="Contacts.csv" separator=";" type="com.axelor.apps.base.db.Partner" search="self.importId = :id" >
  		<bind column="id" to="importId" />
  		<bind column="first_name" to="firstName"/>
  		<bind to="isContact" eval="true" />
  		<bind column="Nom_de_Famille" to="name"/>
  		<bind column="title" to="titleSelect" eval="title == 'Mr.' ? 1: title == 'Mrs.' ? 2: title == 'Ms.' ? 3: null"/>
  		<bind column="Fonction" to="jobTitle" />
  		<bind to="emailAddress" search="self.address = :Email" if="Email != null &amp;&amp; !Email.empty">
			<bind to="address" column="Email" />
		</bind>
		<bind column="Portable" to="mobilePhonePro"/>
		<bind column="Téléphone" to="fixedPhonePro"/>
		<bind column="Fax" to="fax"/>
  		<bind to="mainInvoicingAddress" search="self.importId = :id" >
  			<bind to="importId" column="id" />
	  		<bind to="addressL4" column="Adresse_principale_Rue1" />
	  		<bind to="addressL5" column="Adresse principale_Région" />
	  		<bind to="addressL6" column="addressL6" />
	  		<bind to="addressL7Country" search="self.code = :Adresse_principale_Pays" update="true">
	  			<bind to="code" column="Adresse_principale_Pays" eval="Adresse_principale_Pays == 'FRANCE' ? 'FRA' : Adresse_principale_Pays == 'MONACO' ? 'MCO': Adresse_principale_Pays == 'USA' ? 'USA': Adresse_principale_Pays == 'BELGIQUE' ? 'BEL' : null" />
	  		</bind>
  		</bind>
  		<bind to="description" column="Description" />
  		<bind to="source" search="self.code = :Origine" update="true">
  			<bind to="code" column="Origine" eval="Origine == 'Campaign' ? 'ADV' : Origine == 'Cold Call' ? 'CCL' : Origine == 'Direct Mail' ? 'DML' : Origine == 'Employee' ? 'EMP' : Origine == 'Existing Customer' ? 'CLT' : Origine == 'Partner' ? 'PAR' :  Origine == 'Self Generated' ? 'SLF' : Origine == 'Web Site' ? 'WEB' : Origine == 'Word Of mouth' ? 'BAO' : null" /> 
  		</bind>
  		<bind to="parentPartner" search="self.name = :Compte" update="true" >
  			<bind to="name" column="Compte" />
  		</bind>
  		<bind to="userInfo" search="self.importId = :assigned_user_id" update="true">
			<bind to="importId" column="assigned_user_id" />
		</bind>
		<bind to="team" search="self.importId = :team_id" update="true">
			<bind to="importId" column="team_id" />
		</bind>
  	</input> 
  	
  	<input file="Contacts.csv" separator=";" type="com.axelor.apps.base.db.Partner" search="self.name = :Compte" update="true">
  		<bind to="name" column="Compte" />
  		<bind to="contatPartnerSet" search="self.importId = :importId" update="true">
  			<bind to="importId" column="importId" />
  		</bind>
  	</input> 
  	
</csv-inputs>