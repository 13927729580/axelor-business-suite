<?xml version="1.0"?>
<csv-inputs xmlns="http://apps.axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/data-import http://apps.axelor.com/xml/ns/data-import/data-import_0.8.xsd">
  
<!-- 	<input file="DiscountBand.csv" type="com.axelor.apps.contract.db.DiscountThresholdLine"> -->
<!-- 		<bind to="discountThreshold" search="self.threshold = :threshold AND self.discountBand.name = :name" > -->
<!-- 			<bind to="discountBand" search="self.name = :name" > -->
<!-- 				<bind column="name" to="name"/> -->
<!-- 			</bind> -->
<!-- 			<bind column="threshold" to="threshold"/> -->
<!-- 		</bind> -->
<!-- 		<bind column="fromDate" to="fromDate"/> -->
<!-- 		<bind column="toDate" to="toDate" eval="!toDate.empty ? toDate : null" /> -->
<!-- 		<bind column="discountPrice" to="discountPrice"/> -->
<!--  	</input> -->

<!--  
	
	<input file="ParameterType.csv" type="com.axelor.apps.pricing.db.ParameterType" search="self.code = :code">
   		<bind column="code" to="code" />
		<bind column="name" to="name" />
   </input>

   <input file="Parameter.csv" type="com.axelor.apps.pricing.db.Parameter" search="self.parameterId = :parameterId">
   		<bind column="parameterId" to="parameterId" />
   </input>
	
	<input file="MatrixStructure.csv" type="com.axelor.apps.pricing.db.MatrixStructure" search="self.name=:name">
		<bind to="sourceParam1" column="sourceParam1" eval="sourceParam1.empty ? null : sourceParam1" />
		<bind to="sourceParam2" column="sourceParam2" eval="sourceParam2.empty ? null : sourceParam2" />
		<bind to="sourceParam3" column="sourceParam3" eval="sourceParam3.empty ? null : sourceParam3" />
		<bind to="sourceParam4" column="sourceParam4" eval="sourceParam4.empty ? null : sourceParam4" />
		<bind to="sourceParam5" column="sourceParam5" eval="sourceParam5.empty ? null : sourceParam5" />
		<bind to="sourceParam6" column="sourceParam6" eval="sourceParam6.empty ? null : sourceParam6" />
		<bind to="sourceParam7" column="sourceParam7" eval="sourceParam7.empty ? null : sourceParam7" />
		<bind to="sourceParam8" column="sourceParam8" eval="sourceParam8.empty ? null : sourceParam8" />
		<bind to="sourceParam9" column="sourceParam9" eval="sourceParam9.empty ? null : sourceParam9" />
	</input>
	
		<input file="ConstituentGRD.csv" type="com.axelor.apps.pricing.db.Constituent" search="self.code=:code"/>
	
	<input file="PricingStructurePfLineGRD.csv" type="com.axelor.apps.pricing.db.PricingStructurePfLine" search="self.code=:code"/>
	
	<input file="PricingStructurePvLineGRD.csv" type="com.axelor.apps.pricing.db.PricingStructurePvLine" search="self.code=:code"/>
	

	<input file="PricingListLineGRD10.csv" type="com.axelor.apps.pricing.db.PricingListLine">
		<bind to="pricingListVersion" search="self.fromDate = :from_date and self.pricingList.name = :pricing_list_name"> 
			<bind to="fromDate" column="from_date" eval="!from_date.empty ? from_date.replaceAll('([0-9]{1,2})/([0-9]{1,2})/([0-9]{4})','$3'.padLeft(2,'0')+'-'+'$1'.padLeft(2,'0')+'-$2') : null"/>
			<bind to="toDate" column="to_date" eval="!to_date.empty ? to_date.replaceAll('([0-9]{1,2})/([0-9]{1,2})/([0-9]{4})','$3'.padLeft(2,'0')+'-'+'$1'.padLeft(2,'0')+'-$2') : null"/>
			<bind to="activeOk" eval="'true'" />
			<bind search="self.name = :pricing_list_name" to="pricingList">
				<bind column="pricing_list_name" to="name" />
				<bind search="self.name = :key_pricing_list" to="keyPricingList">
					<bind column="key_pricing_list" to="name" />
				</bind>
			</bind>
		</bind>
		<bind search="self.name = :parameter1 and self.parameterType != null and self.parameterType.code = 'segtUtilisateur'" 
			to="parameter1" update="true">
			<bind column="parameter1" to="name"/>
		</bind>
		<bind to="val1" eval="!val1.empty ? val1.replace(',','.') : ''"/>
		<bind to="val2" eval="!val2.empty ? val2.replace(',','.') : ''"/>
	</input>
		-->
	<input file="PricingLineGRD.csv" type="com.axelor.apps.pricing.db.PricingLine" 
 		search="self.constituent.code =:constituentCode AND self.pricing.koalaId =:pricingKoalaId">
		<bind search="self.code = :constituentCode" to="constituent">
			<bind column="constituentCode" to="code" />
		</bind>
		<bind search="self.name = :pricingList1Name" to="pricingList1">
			<bind column="pricingList1Name" to="name" />
		</bind>
		<bind search="self.code = :productCode" to="product">
			<bind column="productCode" to="code" />
		</bind>
		<bind search="self.koalaId = :pricingKoalaId" to="pricing">
			<bind column="pricingKoalaId" to="koalaId" />
		</bind>
	</input>
	
</csv-inputs>