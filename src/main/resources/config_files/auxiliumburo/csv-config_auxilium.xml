<?xml version="1.0" encoding="UTF-8"?>
<csv-inputs xmlns="http://apps.axelor.com/xml/ns/data-import"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://apps.axelor.com/xml/ns/data-import http://apps.axelor.com/xml/ns/data-import/data-import_0.9.xsd">
  
    <input file="base_partner.csv" separator="," type="com.axelor.apps.base.db.Address" search="self.importId = :Siret">
    	<bind to="importId" column="Siret" />
    	<bind to="addressL2" column="Complément_d'adresse" />
    	<bind to="addressL4" column="Voie" />
    	<bind to="addressL5" column="Boîte_postale" />
    	<bind to="addressL6" eval="Code_postal+' '+Commune" />
    </input>  
    
    <input file="base_partner.csv" separator="," type="com.axelor.apps.base.db.Partner" search="self.importId = :Siret">
    	<bind to="importId" column="Siret" />
    	<bind to="isContact" eval="false" />
    	<bind to="partnerTypeSelect" eval="1" />
    	<bind to="registrationCode" column="Siret" />
    	<bind to="name" eval="!Nom_commercial.empty ? Nom_commercial : !Dénomination.empty ? Dénomination : Nom_de_lentreprise" />
    	<bind to="createOn" column="Date_de_création" />
    	<bind to="mainInvoicingAddress" search="self.importId = :Siret" update="true">
    		<bind to="importId" column="Siret" />
    	</bind>	
    	<bind to="deliveryAddress" search="self.importId = :Siret" update="true">
    		<bind to="importId" column="Siret" />
    	</bind>
    	<bind to="fixedPhone" column="Téléphone" />
    	<bind to="fax" column="Télécopie" />
    	<bind to="emailAddress" search="self.importId = :Siret" if="!Email.empty">
    		<bind to="address" column="Email" />
    		<bind to="importId" column="Siret" />
    	</bind>
    	<bind to="webSite" column="Site_web_de_l'entreprise" />
    	<bind to="currency" search="self.name = :Chiffre_daffaires_entreprise_devise" if="!Chiffre_daffaires_entreprise_devise.empty">
    		<bind to="name" column="Chiffre_daffaires_entreprise_devise" />
    		<bind to="code" column="Chiffre_daffaires_entreprise_devise" />
    	</bind>
    </input> 
    
    <input file="base_partner.csv" separator="," type="com.axelor.apps.base.db.Partner" search="self.importId = :Siret" update="true">
    	<bind to="contactPartnerSet" search="self.mainPartner.importId = :Siret AND self.jobTitle = 'Responsable légal'" if="!Responsable_légal.empty">
    		<bind to="mainPartner" search="self.importId = :Siret" update="true">
    			<bind to="importId" column="Siret" />
    		</bind>
    		<bind to="name" column="Responsable_légal" />
    		<bind to="isContact" eval="true" />
    		<bind to="partnerTypeSelect" eval="2" />
    		<bind to="jobTitle" eval="'Responsable légal'" />
    	</bind>
    </input>  
    
    <input file="base_partner.csv" separator="," type="com.axelor.apps.base.db.Partner" search="self.importId = :Siret" update="true">
    	<bind to="contactPartnerSet" search="self.mainPartner.importId = :Siret AND self.jobTitle = 'Directeur administratif et financier'" if="!Directeur_administratif_et_financier.empty">
    		<bind to="mainPartner" search="self.importId = :Siret" update="true">
    			<bind to="importId" column="Siret" />
    		</bind>
    		<bind to="name" column="Directeur_administratif_et_financier" />
    		<bind to="isContact" eval="true" />
    		<bind to="partnerTypeSelect" eval="2" />
    		<bind to="jobTitle" eval="'Directeur administratif et financier'" />
    	</bind>
    </input>
	  	
</csv-inputs>

