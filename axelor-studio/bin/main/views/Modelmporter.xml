<?xml version="1.0" encoding="UTF-8" standalone="yes"?>
<object-views xmlns="http://axelor.com/xml/ns/object-views"
  xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
  xsi:schemaLocation="http://axelor.com/xml/ns/object-views http://axelor.com/xml/ns/object-views/object-views_4.0.xsd">
  
  <grid name="model-importer-grid" title="Model Importers" model="com.axelor.studio.db.ModelImporter">
      <field name="metaFile"/>
  </grid>
  
  <form name="model-importer-form" title="Model Importer" model="com.axelor.studio.db.ModelImporter"> 
    <panel>
      <field name="metaFile" canNew="true" onChange="action-model-importer-validate-meta-file" widget="binary-link"/>
      <button name="importModels" title="Import" onClick="save,action-model-importer-import-models,save" />
      <field name="logFile" readonly="true" widget="binary-link" />
    </panel>
  </form>
  
  <action-method name="action-model-importer-import-models" model="com.axelor.studio.db.ModelImporter">
      <call class="com.axelor.studio.web.ModelImporterController" method="importModels"/>
  </action-method>
  
  <action-validate name="action-model-importer-validate-meta-file" model="com.axelor.studio.db.ModelImporter">
      <error message="Please select file with 'xlsx' format only" if="metaFile != null &amp;&amp; !metaFile.getFileName().endsWith('xlsx')" action="action-model-importer-reset-meta-file"/>
  </action-validate>
  
  <action-record name="action-model-importer-reset-meta-file" model="com.axelor.studio.db.ModelImporter">
      <field name="metaFile" expr="eval:null"/>
  </action-record>
  
</object-views>